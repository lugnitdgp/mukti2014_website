function checkIfTouchDevice(){if(touchDevice="ontouchstart"in window?1:0,1==touchDevice){var a=document.getElementById("template-wrapper");a.addEventListener("touchmove",function(a){"slideshow"!=currModuleType&&a.preventDefault()},!1)}prepareTemplate()}function removeTemplateLoader(a){$(".main-template-loader").remove();var b=$.browser.version+"",c=document.documentMode,d=b.indexOf(".");return b=b.substring(0,d),$.browser.msie&&(8>b||b>=8&&8>c)?($("body").empty().css("visibility","visible"),$("body").append("Your browser is too old for this website. Please upgrade your browser version or experience this website in: Firefox, Chrome, Opera or Safari"),void 0):(($.browser.msie&&b.substr(0,1)>8&&c>8||!$.browser.msie)&&(isGoodBrowser=!0,setPageTitle(a),0==$("#menu-container").hasClass("shadow-side-all")&&$("#menu-container").addClass("shadow-side-all")),prepareTemplate(),void 0)}function prepareTemplate(){1==templateFirstRun?($("#template-logo").click(function(){if(0!=loadedContent){var b=$(this).attr("data-href");void 0==b&&(b=""),b=b.replace(urlCharDeeplink,""),b=b.substring(b.lastIndexOf("/")+1);var c=-1!=url.indexOf(urlCharDeeplink)?url:urlCharDeeplink+url;c!=b&&(window.location.href=templateBaseURL+urlCharDeeplink+b)}}),storeMenuArr(),menuListeners(),checkWhatToLoad(),templateFirstRun=!1):settingsForScreens()}function checkWhatToLoad(){var a="",b="";if(currModuleType=$("#template-menu").attr("data-current-module-type"),sideType=$("#template-menu").attr("data-side"),b=$("#template-menu").attr("data-href").replace(urlCharDeeplink,""),prevURL=urlCharDeeplink+b,1==templateFirstRun){var c=document.URL;c=c.replace(templateBaseURL,"");var d="";-1==c.indexOf(urlCharDeeplink)&&""!=c?"index.html"==c||"index.htm"==c?(c="",""==c&&1==customPageStart&&(c=customPageStartURL,c=c.replace(templateBaseURL,"")),c=c.replace(urlCharDeeplink,""),c=c.substring(c.lastIndexOf("/")+1),d=updateMenu(c,prevURL,!1,!0),window.location.hash=d):(c=c.replace(urlCharDeeplink,""),c=c.substring(c.lastIndexOf("/")+1),d=updateMenu(c,prevURL,!1,!0),window.location.href=templateBaseURL+d):(""==c&&1==customPageStart?(c=customPageStartURL,c=c.replace(templateBaseURL,""),b=customPageStartURL.replace(urlCharDeeplink,"")):(c=c.replace(urlCharDeeplink,""),c=c.substring(c.lastIndexOf("/")+1),c=""!=c&&c!=urlCharDeeplink?c:b,b=c,(-1!=c.indexOf("index.html")||-1!=c.indexOf("index.htm"))&&(c=c.substring(c.lastIndexOf(urlCharDeeplink)+1))),c=c.replace(urlCharDeeplink,""),c=c.substring(c.lastIndexOf("/")+1),d=updateMenu(c,prevURL,!1,!0),window.location.hash=d)}a=oldMenuData[3],a=void 0==a?"":a,setMobileMenuOption(oldMenuData[2]),$("#module-container").empty(),$("#module-container").load(a+b+" title, #module-container > *",firstRunLoaded)}function setMobileMenuOption(a){var b=0;a=a.replace(urlCharDeeplink,""),$("#template-smpartphone-menu select").find("option").each(function(){var c=$(this).attr("value").replace(urlCharDeeplink,"");c==a&&$(this).attr("selected","selected"),b++})}function onTemplateHashChange(){var c=window.location.hash+"",d=menuOptionID,e=submenuOptionID,f=!0,g=menuData;c=c.replace(urlCharDeeplink,""),c=c.substring(c.lastIndexOf("/")+1),updateMenu(c,prevURL,void 0,!0),oldMenuData=g,d!=menuOptionID&&(f=void 0),menuOptionOut(d,e,f),menuData="null"!=menuOptionsArr[menuOptionID][1]?menuOptionsArr[menuOptionID][1]:menuOptionsArr[menuOptionID][6][submenuOptionID][1],setMobileMenuOption(menuData[2]),touchContainer(),urlChanged()}function updateMenu(a,b,c,d){a=a.replace(urlCharDeeplink,""),b=b.replace(urlCharDeeplink,"");for(var e="",j=menuOptionsArr.length;j--;)if("null"!=menuOptionsArr[j][1])a==menuOptionsArr[j][1][2]&&(e=urlCharDeeplink+menuOptionsArr[j][1][2],setMenuData(menuOptionsArr[j][1]),menuOptionID=j,submenuOptionID=-1,1==d&&menuOptionIn(menuOptionID,submenuOptionID),j=0);else for(var k=menuOptionsArr[j][6],l=k.length;l--;)a==k[l][1][2]&&(e=k[l][0],setMenuData(k[l][1]),menuOptionID=j,submenuOptionID=l,1==d&&menuOptionIn(menuOptionID,submenuOptionID),j=0);return e}function firstRunLoaded(a,b){switch($(window).bind("hashchange",onTemplateHashChange),b){case"error":console.log("Error loading the INDEX page: "+a);break;case"success":defaultIndexTitle=$("head title").text();var d=$("#module-container").find("title");$("#module-container").find("title").remove(),setupAudio(),TweenMax.to($(".main-template-loader"),.3,{css:{opacity:"0"},ease:Sine.easeOut,onComplete:removeTemplateLoader,onCompleteParams:[d]})}}function getMenuWidth(){return $("#menu-container").width()}function getMenuHeight(){return $("#menu-container").height()}function settingsForScreens(){function h(a){if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!1),a.dispatchEvent(b)}else document.createEventObject?a.fireEvent("onclick"):"function"==typeof a.onclick&&a.onclick()}$("body").css("visibility","visible");var a=parseInt($("#menu-container .menu-content-holder").css("width"),10),b=parseInt($("#menu-container #menu-hider").width(),10),c=parseInt($("#menu-container #menu-hider #menu-hider-icon").width(),10),d=parseInt($("#menu-container").css("height"),10),e=parseInt($("#menu-container #menu-hider").height(),10),f=parseInt($("#menu-container #menu-hider #menu-hider-icon").height(),10);if(templateMenuW=a+b,$("#menu-hider-icon").click(menuHideClick),$("#module-container").css("width",$(window).width()-templateMenuW+"px"),$(window).width()>767&&($("#menu-container").css("left",-(a+b+c)+"px"),$("#menu-container").css("visibility","visible"),$("#menu-hider").css("display","inline"),$("#menu-hider").css("visibility","visible"),$("#module-container").css("opacity",1),$("#module-container").css("left",a+b+"px"),$("footer").css("display","inline"),TweenMax.to($("#menu-container"),.4,{css:{left:"0px"},ease:Sine.easeInOut,delay:.5,onComplete:endStartupAnimation})),$(window).width()<=767){templateMenuW=0;var g=$(window).height()-(d+e);$("#menu-container").css("left","0px"),$("#menu-container").css("top",-(d+e+f)+"px"),$("#menu-container").css("visibility","visible"),$("#menu-hider").css("display","inline"),$("#menu-hider").css("visibility","visible"),$("#module-container").css("opacity","1"),$("#module-container").css("left","0px"),$("#module-container").css("top",d+e+"px"),$("#module-container").css("height",g),TweenMax.to($("#menu-container"),.4,{css:{top:"0px"},ease:Sine.easeInOut,delay:.5,onComplete:endStartupAnimation})}$("#template-smpartphone-menu select").change(function(){var a=$(this).val();if(-1!=a.indexOf("http://")){var b='<a id="mc-link" href="'+a+'" style="display:none;" target="_blank" />';$("#template-smpartphone-menu select").append(b);var c=document.getElementById("mc-link");return h(c),$("#template-smpartphone-menu select").find("#mc-link").remove(),void 0}if($(this).val()!=urlCharDeeplink){menuOptionOut(menuOptionID,submenuOptionID,void 0);var d=updateMenu($(this).val(),prevURL,void 0,!1);window.location.hash=d}})}function endStartupAnimation(){templateFirstRunDone=!0,delayInterval=setInterval(function(){showModule(),clearInterval(delayInterval)},200)}function endModuleStart(){}function menuHideClick(){var a=$(window).width();if($(window).height(),1==menuActive)if(menuActive=!1,alwaysUpdate(),a>=768){var c=$("#menu-hider").length>0?parseInt($("#menu-hider").width(),10):0,d=parseInt($("#menu-container").css("width"),10)-c,e=0;TweenMax.to($("#template-wrapper"),.4,{css:{left:-d+"px"},ease:Sine.easeInOut}),TweenMax.to($("#menu-container"),.4,{css:{left:e+"px"},ease:Sine.easeInOut,onComplete:function(){0==touchDevice&&activateHoverMenu()}})}else{var f=parseInt($("#menu-container #menu-hider").height(),10),g=parseInt($("#menu-container").css("height"),10)-f,e=0;TweenMax.to($("#template-wrapper"),.4,{css:{top:-g+"px"},ease:Sine.easeInOut}),TweenMax.to($("#menu-container"),.4,{css:{top:e+"px"},ease:Sine.easeInOut,onComplete:function(){0==touchDevice&&activateHoverMenu()}})}else 0==touchDevice&&disableHoverMenu(),menuActive=!0,isOverMenu=!1,alwaysUpdate(),TweenMax.to($("#template-wrapper"),.4,{css:{left:"0px",top:"0px"},ease:Sine.easeInOut}),TweenMax.to($("#menu-container"),.4,{css:{left:"0px"},top:"0px",ease:Sine.easeInOut})}function activateHoverMenu(){$("#menu-container").bind("mouseenter",overMenu),$("#menu-hider-icon").bind("mouseenter",menuHiderOver),$("#menu-hider-icon").bind("mouseleave",menuHiderOver),$("#menu-container").bind("mouseleave",outMenu)}function menuHiderOver(a){a.stopPropagation()}function disableHoverMenu(){$("#menu-container").unbind("mouseenter",overMenu),$("#menu-hider-icon").unbind("mouseenter",menuHiderOver),$("#menu-hider-icon").unbind("mouseleave",menuHiderOver),$("#menu-container").unbind("mouseleave",outMenu)}function overMenu(){1!=menuActive&&(isOverMenu=!0,TweenMax.to($("#template-wrapper"),.4,{css:{left:"0px",top:"0px"},ease:Sine.easeInOut}),TweenMax.to($("#menu-container"),.4,{css:{left:"0px",top:"0px"},ease:Sine.easeInOut}),alwaysUpdate())}function outMenu(){if(1!=menuActive){isOverMenu=!1;var a=$(window).width();if($(window).height(),a>=768){var c=parseInt($("#menu-container").css("width"),10)-parseInt($("#menu-hider").width(),10),d=0;TweenMax.to($("#template-wrapper"),.4,{css:{left:-c+"px",top:"0px"},ease:Sine.easeInOut}),TweenMax.to($("#menu-container"),.4,{css:{left:d+"px",top:"0px"},ease:Sine.easeInOut})}else{var e=parseInt($("#menu-container #menu-hider").height(),10),f=parseInt($("#menu-container").css("height"),10)-e,d=0;TweenMax.to($("#template-wrapper"),.4,{css:{top:-f+"px",left:"0px"},ease:Sine.easeInOut}),disableHoverMenu(),TweenMax.to($("#menu-container"),.4,{css:{top:d+"px",left:"0px"},ease:Sine.easeInOut,onComplete:function(){0==touchDevice&&activateHoverMenu()}})}alwaysUpdate()}}function alwaysUpdate(){null!=currentSlide&&resizeImage(currentSlide,!0),null!=$showModuleBackground&&resizeImage($showModuleBackground,!0);var a=$(window).width(),b=$(window).height(),c=a-get_OffsetWidth(),d=b,e=$("#template-menu").attr("data-current-module-type");if(768>a){var f=parseInt($("#menu-container #menu-hider").height(),10),g=b-f;d=g,(1==touchDevice||0==touchDevice)&&updateTemplateScrollbar();var h=1==menuActive?parseInt($("#menu-container").height(),10)-f:0;d-=h,$("#module-container").css("width",c+"px").css("height",d+"px");var i=$("#module-columns");i.length>0&&moduleUpdate_page_columns(0)}else TweenMax.to($("#module-container"),.4,{css:{width:c+"px",height:d+"px"},ease:Sine.easeInOut});null!=$("#module-container-old")&&$("#module-container-old").length>0&&($("#module-container-old #module-background-holder").length>0&&resizeImage($("#module-container-old #module-background-holder"),!0),$("#module-container-old #slide-current").length>0&&resizeImage($("#module-container-old #slide-current"),!0));var j=$("#slideshow-thumbs");if(j.length>0){var k=.5*(c-j.width());TweenMax.to(j,.4,{css:{marginLeft:k},easing:Sine.easeOut})}var l=$("#slideshow .slideshow-slide",$("#module-container"));l.length>0&&$("#slideshow-captions",l).each(function(){$(this).css("top",.3*d+"px"),TweenMax.to($(this),.4,{css:{width:.5*c+"px"},ease:Sine.easeInOut})});var m=$(txt_modCont),n=m.attr("data-id");if("module-position-bc"==n||"module-position-cc"==n){if(m.length>0){var o=Math.round(.5*(c-$(":first",m).width()));TweenMax.to(m,.4,{css:{left:o},easing:Sine.easeOut})}$("#module-galleries").length>0&&moduleUpdate_gallery()}var p=$("#module-full-width-gallery");if(p.length>0){if(0>=initialThumbW)return;moduleUpdate_full_width_gallery()}var q=$("#module-contact #module-contact-holder");q.length>0&&(moduleUpdate_contact(),TweenMax.to(q,.4,{css:{left:.5*(c-q.width())},easing:Sine.easeOut}));var r=$("#module-full-width");r.length>0&&moduleUpdate_full_width(!0);var s=$("#module-fullscreen-video");s.length>0&&moduleUpdate_fullscreen_video(!0),"text_page"==e&&moduleUpdate_text_page()}function showModule(){if(0!=templateFirstRunDone)if(null!=moduleList&&(moduleList.destroy(),moduleList=null),"slideshow"==$("#template-menu").attr("data-current-module-type")){if(0==firstMediaLoaded)return;firstMediaLoaded=!1,TweenMax.to($("#loading-animation"),.3,{css:{right:"-104px"},delay:.3,ease:Circ.easeOut}),1==isOtherURL?urlChanged():(clearCustomInterval(startDelay),startDelay=setInterval(function(){loadedContent=!0,moduleSlideshow(),clearCustomInterval(startDelay)},300))}else $showModuleBackground=$("#module-container #module-background-holder #module-background"),$showModuleBackgroundSolid=$("#module-container #module-background-holder div"),showDone=!0,null!=$showModuleBackground&&$showModuleBackground.length>0?1==backLoaded&&(showDone=!0,animateModuleBackground()):null!=$showModuleBackgroundSolid&&$showModuleBackgroundSolid.length>0?(backLoaded=!0,1==backLoaded&&(showDone=!0,$showModuleBackground=null,$showModuleBackgroundSolid.css("display","inline").css("opacity","0").css("visibility","visible"),TweenMax.to($showModuleBackgroundSolid,.4,{css:{opacity:"1"},delay:.4,ease:Sine.easeOut,onComplete:function(){1==isOtherURL?urlChanged():startModule()}}),audioPlayerPlay(),TweenMax.to($("#loading-animation"),.3,{css:{right:"-104px"},ease:Circ.easeOut}))):($showModuleBackground=null,backLoaded=!1,1==isOtherURL?urlChanged():(audioPlayerPlay(),TweenMax.to($("#loading-animation"),.3,{css:{right:"-104px"},delay:.3,ease:Circ.easeOut,onComplete:startModule})))}function animateModuleBackground(){backLoaded=!0,1==showDone&&(showDone=!1,backLoaded=!1,audioPlayerPlay(),TweenMax.to($("#loading-animation"),.3,{css:{right:"-104px"},delay:.3,ease:Circ.easeOut,onComplete:function(){1==isOtherURL?urlChanged():hideAnimationCompleted()}}))}function hideAnimationCompleted(){$showModuleBackground=$("#module-container #module-background"),$showModuleBackground.length>0&&(resizeImage($showModuleBackground),$showModuleBackground.css("display","inline").css("opacity","0").css("visibility","visible").css("left","-60px"),TweenMax.to($showModuleBackground,.6,{css:{opacity:"1",left:"0px"},ease:Circ.easeOut,onComplete:function(){1==isOtherURL?urlChanged():startModule()}}))}function startModule(){loadedContent=!0;var a=$("#template-menu").attr("data-current-module-type");if(menuData[2]!=oldMenuData[2]&&void 0!=menuData[2])return clearCustomInterval(showModuleInterval),urlChanged(),void 0;switch(previousModuleType=a,endShowPage(),templateCollectGarbage(),a){case"slideshow":moduleSlideshow();break;case"home2":moduleHome2();break;case"home3":moduleHome3();break;case"banner":moduleBanner();break;case"text_page":moduleTextPage();break;case"news":moduleNews();break;case"contact":moduleContact();break;case"showreel":moduleShowreel();break;case"gallery":moduleGallery();break;case"full_width":moduleFullWidth();break;case"full_width_gallery":moduleFullWidthGallery();break;case"page_columns":modulePageColumns();break;case"fullscreen_video":moduleFullscreenVideo();break;case"pricing_tables":modulePricingTables()}}function endShowPage(){1==firstRun&&(firstRun=!1),$("#module-container-old").length>0&&$("body").find("#module-container-old").each(function(){$(this).empty().remove()}),endShowDelay=setInterval(function(){checkBackgroundRotation(),clearCustomInterval(endShowDelay)},50)}function checkBackgroundRotation(){backgArrSrc=[],backgArr=[];var a=$("#module-container #module-background-holder");if(a.length>0&&a.children().length>1){var b=a.attr("data-time");void 0!=b&&""!=b&&(backTime=Number(b));var c=0;backCount=0,a.children().each(function(){0==c?1==$(this).is("img")&&(backgArrSrc[c]=$(this).attr("src")):(void 0!=$(this).attr("data-src")&&(backgArrSrc[c]=$(this).attr("data-src")),$(this).remove()),backgArr[c]=$(this),c++}),c=0;var d=backgArrSrc.length;for(c=1;d>c;c++){var e='<img src="'+backgArrSrc[c]+'" class="module-background" alt="" title="" id="next-backg"/>';a.append(e),backgArr[c]=$("#next-backg",a),backgArr[c].attr("id","").css("opacity","0")}startOn=!0,startAnimBack()}}function startAnimBack(){return 0==startOn||backgArr.length<=1?(startOn=!1,void 0):(backDelay=setInterval(function(){backCount<backgArr.length-1?backCount++:backCount=0,animateBackground(backCount),stopAnimBack()},1e3*backTime),void 0)}function stopAnimBack(a){""!=backDelay&&(clearInterval(backDelay),backDelay=""),void 0!=a&&(startOn=a)}function animateBackground(a){if(void 0!=backgArr[a]){var b=$("#module-container #module-background-holder #module-background");b.length>0&&b.css("z-index","1").attr("id","");var c=backgArr[a];c.css("z-index",""),c.attr("id","module-background"),$showModuleBackground=c,resizeImage(c),c.css("visibility","visible").css("display","inline"),TweenMax.to(c,.8,{css:{opacity:"1"},ease:Circ.easeOut,onComplete:function(){b.css("opacity","0").css("visibility","hidden"),startAnimBack()}})}}function moduleSlideshow(){slideshowCurrID=0,slideshowPrevID=0;var a=$("#module-container");currentSlide=$("#slide-current",a),currentSlide.attr("style","display:list-item; visibility: visible; left:-60px;"),resizeImage(currentSlide),currentSlide.css("opacity","0"),storeAllSlides(),$("#module-container").css("visibility","visible"),TweenMax.to(currentSlide,.6,{css:{opacity:"1",left:"0px"},ease:Circ.easeOut,onComplete:slideshowShowThumbs})}function onFirstMediaLoaded(){firstMediaLoaded=!0,showModule(),$("#slide-current").attr("onload","")}function storeAllSlides(){var a=$("#module-container"),b=$("#slideshow",a),c=0;slideshowAutoPlay="true"==b.attr("data-auto-play")?!0:!1,timerSec="undefined"!=b.attr("data-time")?Number(b.attr("data-time")):4,b.children().each(function(){if(slidesArray[c]=new Array,0!=c){var a=$("#slide-src",this),b='<img src="'+a.attr("data-src")+'" alt="" />';a.after(b).remove()}slidesArray[c][0]=$("img",this);var d=new Array,e=new Array,f=0;$("#slideshow-captions",this).css("top",.3*$(window).height()+"px"),$("#slideshow-captions",this).css("left",.5*$("#module-container").width()+"px"),$("#slideshow-captions",this).children().each(function(){d[f]=$(this),e[f]=$(this).width(),f++}),slidesArray[c][1]=d,slidesArray[c][2]=e,c++}),slideshowLimit=c++,0!=slidesArray[0][1].length&&(captionAvailable=!0),c=0,$("#slideshow-thumbs #slideshow-thumbs-holder #slideshow-thumbs-container",a).children().each(function(){0==c&&0==$(this).hasClass("thumb-selected")&&($(this).addClass("thumb-selected"),$("#thumb-image-hover",$(this)).removeClass().attr("style","left: 0px; top: 0px;"),$("img",$(this)).attr("style","border-color:"+themeColor+";")),thumbsArray[c]=$(this),c++})}function startTimer(){null==timerSlideshow&&(timerSlideshow=$.timer(checkSlideshowTimer),timerSlideshow.set({time:1e3*timerSec,autostart:!1}))}function checkSlideshowTimer(){timerSlideshow.stop(),slideshowLimit-1>slideshowCurrID?(slideshowPrevID=slideshowCurrID,slideshowCurrID++):(slideshowPrevID=slideshowCurrID,slideshowCurrID=0);var a=document.getElementById("slideshow-thumbs-counter").getElementsByTagName("span");$(a).empty().append(slideshowCurrID+1+"/"+total),stopOrHidePrevCaptions()}function stopSlideshowTimer(){timerSlideshow.stop()}function deleteSlideshowTimer(){null!=timerSlideshow&&(timerSlideshow.stop(),timerSlideshow=null)}function slideshowShowThumbs(){if(endShowPage(),null!=thumbsList&&(thumbsList.destroy(),thumbsList=null),0==touchDevice){thumbsList=$("#slideshow-thumbs-content").McCustomList({scrollDirection:"horizontal",scrollType:"linear"}),thumbsList.setupList({scrollContainer:$("#slideshow-thumbs-container"),mouseWheelSupport:"yes",buttonsSupport:"no",draggerContainer:null,draggerScroll:null,totalMinusSize:0,scrollSpeed:112,offsetSize:-4,horizFixHolder:$(".horizontal-fix-slideshow-thumbs")}),$("#slideshow-thumbs-container").find(".slideshow-thumb-holder").hover(function(a){0==$(this).hasClass("thumb-selected")&&(customHoverAnimation("over",a,$(this),$("#thumb-image-hover",this)),TweenMax.to($("img",this),.6,{css:{borderColor:themeColor},ease:Circ.easeOut}))},function(a){var b="#ffffff";0==$(this).hasClass("thumb-selected")&&(customHoverAnimation("out",a,$(this),$("#thumb-image-hover",this)),TweenMax.to($("img",this),.6,{css:{borderColor:b},ease:Circ.easeOut}))});var a=$(".slideshow-thumbs-arrow-backward .slideshow-thumbs-arrow-backg"),b=a.css("opacity"),c=rgb2hex(a.css("background-color")),d=$(".slideshow-thumbs-arrow-backward, .slideshow-thumbs-arrow-forward"),e=$("#slideshow-thumbs-holder .slideshow-thumbs-arrow-backward"),f=$("#slideshow-thumbs-holder .slideshow-thumbs-arrow-forward");d.unbind("mouseenter mouseleave"),d.hover(function(){TweenMax.to($(".slideshow-thumbs-arrow-backg",this),.3,{css:{opacity:"1",backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".slideshow-thumbs-arrow-backg",this),.3,{css:{opacity:b,backgroundColor:c},easing:Sine.easeOut})}),e.unbind("click"),f.unbind("click"),f.click(function(){null!=thumbsList&&thumbsList.listAutoScroll(-1)}),e.click(function(){null!=thumbsList&&thumbsList.listAutoScroll(1)})}else if(1==touchDevice){var e=$("#slideshow-thumbs-holder .slideshow-thumbs-arrow-backward"),f=$("#slideshow-thumbs-holder .slideshow-thumbs-arrow-forward");e.css("display","none"),f.css("display","none")}total=slidesArray.length;var g=document.getElementById("slideshow-thumbs-counter").getElementsByTagName("span");$(g).empty().append(slideshowCurrID+1+"/"+total);var h=$("#slideshow-thumbs-container .slideshow-thumb-holder");h.click(function(){var a=h.index(this);slideshowCurrID!=a&&(slideshowPrevID=slideshowCurrID,slideshowCurrID=a,null!=timerSlideshow&&timerSlideshow.stop(),$(g).empty().append(a+1+"/"+total),changeThumbsSelection(slideshowPrevID,slideshowCurrID),stopOrHidePrevCaptions())});var i=$("#slideshow-thumbs"),j=-Math.abs(i.width()-get_OffsetWidth())/2;i.attr("style","margin-left:"+j+"px; bottom: -84px; visibility: visible;"),1==touchDevice&&($(".horizontal-fix-slideshow-thumbs").css("width",999999),$("#slideshow-thumbs-container").css("width",$("#slideshow-thumbs-container").width()),$(".horizontal-fix-slideshow-thumbs").css("width",""),$("#slideshow-thumbs-content").css("overflow","auto"),$("#slideshow-thumbs-content").css("-webkit-overflow-scrolling","touch")),startTimer(),initialThumbContW=$("#slideshow-thumbs-content").width(),moduleUpdate_slideshow(),TweenMax.to(i,.6,{css:{bottom:"4px"},delay:.6,ease:Circ.easeOut,onComplete:checkCaption})}function changeThumbsSelection(a,b){oldThumb=thumbsArray[a];var c="#ffffff";oldThumb.length>0&&(oldThumb.removeClass("thumb-selected"),TweenMax.to($("#thumb-image-hover",oldThumb),.3,{css:{left:"-100%",top:"0%"},ease:Sine.easeInOut}),TweenMax.to($("img",oldThumb),.6,{css:{borderColor:c},ease:Circ.easeOut})),currentThumb=thumbsArray[b],0==currentThumb.hasClass("thumb-selected")&&(currentThumb.addClass("thumb-selected"),TweenMax.to($("#thumb-image-hover",currentThumb),.3,{css:{left:"0",top:"0%"},ease:Sine.easeInOut}),TweenMax.to($("img",currentThumb),.6,{css:{borderColor:themeColor},ease:Circ.easeOut}))}function changeSlideshowSlides(a,b){if("slide-current"==slidesArray[a][0].attr("id")){slidesArray[a][0].removeAttr("id"),oldSlide=slidesArray[a][0],oldSlide.css("style","z-index: 1;");var c=oldSlide.parent(oldSlide);c.css("position","absolute").css("z-index","1")}slidesArray[b][0].attr("id","slide-current"),currentSlide=slidesArray[b][0],void 0!=currentSlide.css("style")&&currentSlide.removeAttr("style"),currentSlide.attr("style","z-index: 2; display:list-item; left: 0px; visibility: visible;"),resizeImage(currentSlide),currentSlide.css("opacity","0");var d=currentSlide.parent(currentSlide);d.css("position","absolute").css("z-index","2").css("top","0px"),TweenMax.to(currentSlide,.6,{css:{opacity:"1"},ease:Sine.easeOut,onComplete:completeSlideTransition})}function completeSlideTransition(){var a=0,b=slidesArray.length;for(a=0;b>a;a++)a!=slideshowPrevID&&a!=slideshowCurrID&&slidesArray[a][0].attr("style","display:none; opacity: 0; visibility: hidden;");""!=oldSlide&&oldSlide.attr("style","display:none; opacity: 0; visibility: hidden;"),checkCaption()}function checkCaption(){if(1!=showingInProgress&&(1==slideshowAutoPlay&&null!=timerSlideshow&&timerSlideshow.play(!0),0!=slidesArray[slideshowCurrID][1].length)){showingInProgress=1;var a=0,b=slidesArray[slideshowCurrID][1].length;$(window).height();var d=$(window).width();for(a=0;b>a;a++){var e=slidesArray[slideshowCurrID][1][a];e.css("width","");var f=slidesArray[slideshowCurrID][2][a]+10,g=45*a,h=a==b-1?.5*d:-(f+.5*d),i="top:"+g+"px; left:"+h+"px; display:inline-block; opacity:1;";e.attr("style",i),a==b-1?TweenMax.to(e,5,{css:{left:-(f+.5*d)+"px"},ease:SlowMo.ease.config(.7,.96),onComplete:resetShowing}):TweenMax.to(e,5,{css:{left:.5*d+"px"},ease:SlowMo.ease.config(.7,.96)})}}}function resetShowing(){if(showingInProgress=0,0!=slidesArray[slideshowCurrID][1].length){var a=0,b=slidesArray[slideshowCurrID][1].length;for(a=0;b>a;a++)slidesArray[slideshowCurrID][1][a].css("opacity","0")}}function stopOrHidePrevCaptions(){var a=$("#slideshow .slideshow-slide");if(a.length>0&&$("#slideshow-captions",a).each(function(){$(this).css("top",.3*$(window).height()+"px"),$(this).css("left",.5*$("#module-container").width()+"px")}),0!=slidesArray[slideshowPrevID][1].length){showingInProgress=0;var b=0,c=slidesArray[slideshowPrevID][2].length;$(window).height();var e=$(window).width();for(b=0;c>b;b++){var f=slidesArray[slideshowPrevID][2][b],h=slidesArray[slideshowPrevID][1][b];b==c-1?TweenMax.to(h,.2,{css:{left:-(f+.5*e)+"px",opacity:"0"},ease:Sine.easeOut,onComplete:runOtherSlide}):TweenMax.to(h,.2,{css:{left:.5*e+"px",opacity:"0"},ease:Sine.easeOut})}}else runOtherSlide()}function runOtherSlide(){changeThumbsSelection(slideshowPrevID,slideshowCurrID),changeSlideshowSlides(slideshowPrevID,slideshowCurrID)}function moduleHome2(){function j(){e[stdCurrIndex].attr("class","selected opacity_0"),TweenMax.to(e[stdPrevIndex],.6,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:function(){k()}}),TweenMax.to(e[stdCurrIndex],.6,{css:{opacity:"1"},easing:Sine.easeOut})}function k(){var a=0,b=e.length;for(a=0;b>a;a++)a!=stdCurrIndex&&e[a].attr("class","");1==slideBannerAutoPlay&&null!=timerBanner&&(timerBanner.play(!0),timerGraphic.length>0&&TweenMax.to(timerGraphic,slideBannerSec,{css:{width:"100%"},easing:Sine.easeOut}))}function l(){null==timerBanner&&(timerBanner=$.timer(m),timerBanner.set({time:1e3*slideBannerSec,autostart:!1}))}function m(){timerBanner.stop(),timerGraphic.length>0&&TweenMax.to(timerGraphic,.2,{css:{width:"0%"},easing:Sine.easeOut}),totalBannerSlides-1>stdCurrIndex?(stdPrevIndex=stdCurrIndex,stdCurrIndex++):(stdPrevIndex=stdCurrIndex,stdCurrIndex=0),h[stdPrevIndex].removeClass("selected"),h[stdCurrIndex].addClass("selected"),TweenMax.to($(".control-pin-hover",h[stdPrevIndex]),.3,{css:{opacity:"0"},easing:Sine.easeOut}),TweenMax.to($(".control-pin-hover",h[stdCurrIndex]),.3,{css:{opacity:"1"},easing:Sine.easeOut}),j()}function n(){timerBanner.stop(),timerGraphic.length>0&&TweenMax.to(timerGraphic,.2,{css:{width:"0%"},easing:Sine.easeOut})}var a=$(txt_modCont),b=$("#module-home-layout2",a);if(!(b.length<=0)){var c=$("#home-layout2-banner",b);c.length>0&&(slideBannerAutoPlay="true"==c.attr("data-auto-play")?!0:!1,slideBannerSec="undefined"!=c.attr("data-time")?Number(c.attr("data-time")):4),timerGraphic="",$(".banner-timer-graphic",c).length>0&&(timerGraphic=$(".banner-timer-graphic",c)),moduleUpdate_home2();var d=parseInt(a.css("left"),10);a.attr("style","left: 100%; visibility: visible;"),TweenMax.to(a,.6,{css:{left:d},ease:Circ.easeOut});var e=[],f=$("#standard-banner-controls"),g=$("#control-pin",f),h=[],i=0;f.css("margin-left",-(.5*f.width())),$("#standard-banner").find("a").each(function(){var a=$("#dataSrc",this);if(a.length>0){var b='<img src="'+a.attr("data-src")+'" />';a.after(b).remove()}e[i]=$(this),i++}),totalBannerSlides=e.length,i=0,f.find("#control-pin").each(function(){h[i]=$(this),i++}),g.hover(function(){0==$(this).hasClass("selected")&&TweenMax.to($(".control-pin-hover",this),.3,{css:{opacity:"1"},easing:Sine.easeOut})},function(){0==$(this).hasClass("selected")&&TweenMax.to($(".control-pin-hover",this),.3,{css:{opacity:"0"},easing:Sine.easeOut})}),g.click(function(){stdPrevIndex=stdCurrIndex,stdCurrIndex=$(g).index(this),stdCurrIndex!=stdPrevIndex&&(null!=timerBanner&&n(),h[stdPrevIndex].removeClass("selected"),h[stdCurrIndex].addClass("selected"),TweenMax.to($(".control-pin-hover",h[stdPrevIndex]),.3,{css:{opacity:"0"},easing:Sine.easeOut}),TweenMax.to($(".control-pin-hover",h[stdCurrIndex]),.3,{css:{opacity:"1"},easing:Sine.easeOut}),j())}),1==slideBannerAutoPlay&&(clearInterval(delayBannerInterval),delayBannerInterval="",delayBannerInterval=setInterval(function(){l(),timerBanner.play(!0),timerGraphic.length>0&&TweenMax.to(timerGraphic,slideBannerSec,{css:{width:"100%"},easing:Sine.easeOut}),clearInterval(delayBannerInterval)},500));var o=$(".home-layout-clients a");o.length>0&&o.hover(function(){TweenMax.to($(".client-over",this),.6,{css:{opacity:"1"},easing:Sine.easeOut})},function(){TweenMax.to($(".client-over",this),.6,{css:{opacity:"0"},easing:Sine.easeOut})});var p=$(".home-layout2-content ul li"),q=rgb2hex($(".layout2-description p",p).css("color"));0==touchDevice&&p.length>0&&p.hover(function(){TweenMax.to($(".layout2-description p",this),.6,{css:{color:themeColor},easing:Sine.easeOut}),TweenMax.to($("div:first",this),.3,{css:{top:"-5px"},easing:Sine.easeOut})},function(){TweenMax.to($(".layout2-description p",this),.6,{css:{color:q},easing:Sine.easeOut}),TweenMax.to($("div:first",this),.3,{css:{top:"0px"},easing:Sine.easeOut})})}}function deleteBannerTimer(){clearInterval(delayBannerInterval),delayBannerInterval="",null!=timerBanner&&(timerBanner.stop(),timerBanner=null)}function animateBannerHome2(a){TweenMax.to(a,.4,{css:{opacity:"1"},easing:Sine.easeOut})}function moduleHome3(){var a=$(txt_modCont),b=$("#module-home-layout3",a);if($("#module-wrapper",b),!(b.length<=0)){moduleUpdate_home3();var d=parseInt(a.css("left"),10);a.css("left","100%").css("visibility","visible"),TweenMax.to(a,.6,{css:{left:d},ease:Circ.easeOut});var e=$("#video-wrapper",a);templateAddMediaVideo(e.attr("data-video-type"),e,void 0),$("#home-advertise1, #home-advertise2",a).hover(function(){var a=$(".advertise-details",this);TweenMax.to(a,.3,{css:{backgroundColor:"#3f3f3f"},ease:Sine.easeOut}),TweenMax.to($("span",a),.3,{css:{color:"#f1f1f1"},ease:Sine.easeOut})},function(){var a=$(".advertise-details",this);TweenMax.to(a,.3,{css:{backgroundColor:"#f1f1f1"},ease:Sine.easeOut}),TweenMax.to($("span",a),.3,{css:{color:"#0c0c0c"},ease:Sine.easeOut})}),audioPlayerPause();var f=$(".home-layout-clients a");f.length>0&&f.hover(function(){TweenMax.to($(".client-over",this),.6,{css:{opacity:"1"},easing:Sine.easeOut})},function(){TweenMax.to($(".client-over",this),.6,{css:{opacity:"0"},easing:Sine.easeOut})}),clearCustomInterval(homeInterval),homeInterval=setInterval(function(){moduleUpdate_home3(),clearCustomInterval(homeInterval)},1e3)}}function getElementStyle(a){var b="";return a.length>0&&(b=void 0==a.attr("style")?" ":a.attr("style")+" "),b}function moduleUpdate(a,b,c,d,e,f,g){if(1!=endPreviousModule){var h=parseInt($("#module-container").css("top"),10),i=getElem_W_H(a,"h")-h;getElem_W_H(a,"w"),getElem_W_H(b,"h")-h;var l=getElem_W_H(a,"w"),m=getElem_W_H(c,"h");getElem_W_H(c,"w");var o=$("#module-container-holder").attr("data-id"),p=$(t_scrBarV1),q=$(t_scrBarV2),r=p.length>0?p:q,s=$(window).height(),t=$(window).width();getMenuHeight();var v=1==menuActive?parseInt($("#menu-container").height(),10):parseInt($("#menu-container #menu-hider").height(),10);if(0==touchDevice||1==touchDevice){var w=0;if(r.length,r.length>0&&(t>=768?r.css("height",s).css("top","0px"):r.css("height",s-v+"px")),i>=m){if(r.length>0&&"none"!=r.css("display")&&TweenMax.to(r,.6,{css:{opacity:"0"},ease:Quad.easeOut,onComplete:function(){r.css("display","none")}}),null!=moduleList&&(moduleList.destroy(),moduleList=null),1==f)return;var y=i-m;if("none"==d?"module-position-bc"!=o?b.parent(b).css("top",Math.round(.5*y)+"px"):b.parent(b).css("top",Math.round(y)+"px"):"height"==d?c.css("top",Math.round(.5*y)+"px"):"custom"==d&&(1==e?TweenMax.to(c,.3,{css:{top:"0px"},ease:Sine.easeOut}):c.css("top","0px")),"module-position-bc"==o||"module-position-cc"==o){var z=Math.round(.5*($("#module-container").width()-l));
1==e?TweenMax.to(a,.6,{css:{left:z+"px"},ease:Sine.easeOut}):a.css("left",z+"px")}}else{if(r.length>0){switch(d){case"none":b.parent(b).css("top","0px"),c.parent(c).css("top","0px");break;case"height":c.css("top","0px")}TweenMax.killTweensOf(r),"none"==r.css("display")&&r.css("opacity","0").css("display","inline"),TweenMax.to(r,.6,{css:{opacity:"1"},ease:Quad.easeOut})}if(null==moduleList?(moduleList=a.McCustomList({scrollDirection:"vertical",scrollType:"linear",isTouchDevice:touchDevice}),moduleList.setupList({scrollContainer:c,mouseWheelSupport:"yes",buttonsSupport:"no",draggerContainer:r,draggerScroll:$("#module-scrollbar-dragger",r),totalMinusSize:w,scrollSpeed:100,offsetSize:0,horizFixHolder:null,customStartPos:g})):moduleList.updateCustomList(w),"module-position-bc"==o||"module-position-cc"==o){var z=Math.round(.5*($("#module-container").width()-l));"module-position-bc"==o&&b.parent(b).css("top","0px"),1==e?TweenMax.to(a,.6,{css:{left:z+"px"},ease:Sine.easeOut}):a.css("left",z+"px")}}}}}function getElem_W_H(a,b){var c=a.length>0?a.height()+parseInt(a.css("margin-top"),10)+parseInt(a.css("margin-bottom"),10):0,d=a.length>0?a.width():0;return"w"==b?d:c}function moduleTextPage(){var a=$(txt_modCont),b=$("#module-text-page",a),c=$("#module-wrapper",a),d=a.attr("data-id"),e=a.width(),f=a.height();if(moduleEnd=!0,!(b.length<=0))switch(endModuleFunction=endModuleTextPage,mediaReplace_Gif_With_Img($(".media-holder",b)),mediaReplace_Gif_With_Img($(".media-holder-careers",b)),d){case"module-position-lb":break;case"module-position-lc":var g=-e+"px";moduleUpdate(b,c,$("div:first",c),sideType),a.attr("style",getElementStyle(a)+" left:"+g+"; visibility: visible;"),TweenMax.to(a,.6,{css:{left:"0px"},ease:Circ.easeInOut,onComplete:moduleUpdate_text_page});break;case"module-position-bc":moduleUpdate(a,c,$("div:first",c),sideType);var g=parseInt(b.css("top"),10)+"px";a.css("top",f).css("visibility","visible"),TweenMax.to(a,.6,{css:{top:"0px"},ease:Circ.easeInOut,onComplete:moduleUpdate_text_page});break;case"module-position-rc":a.css("position","fixed"),moduleUpdate(b,c,$("div:first",c),sideType);var g=-e+"px";a.attr("style",getElementStyle(a)+" position: fixed; right:"+g+"; visibility: visible;"),TweenMax.to(a,.6,{css:{right:"0px"},ease:Circ.easeInOut,onComplete:moduleUpdate_text_page});break;case"module-position-cc":moduleUpdate(a,c,$("div:first",c),sideType);var g=parseInt(a.css("left"),10);a.attr("style",getElementStyle(a)+" left: 100%; visibility: visible;"),TweenMax.to(a,.6,{css:{left:g},ease:Circ.easeOut,onComplete:moduleUpdate_text_page})}}function mediaReplace_Gif_With_Img(a){a.length>0&&(void 0!=a.attr("data-img-touch")&&""!=a.attr("data-img-touch")&&1==touchDevice?$("img",a).attr("src",a.attr("data-img-touch")):$("img",a).attr("src",$("img",a).attr("src")))}function endModuleTextPage(){var a=$("#module-container-holder"),b=a.attr("data-id"),c=a.width(),d=a.height();switch(endPreviousModule=!0,b){case"module-position-lb":break;case"module-position-lc":var e=-c+"px";TweenMax.to(a,.6,{css:{left:e},ease:Circ.easeInOut,onComplete:endModuleComplete});break;case"module-position-bc":TweenMax.to(a,.6,{css:{top:d+"px"},ease:Circ.easeInOut,onComplete:endModuleComplete});break;case"module-position-rc":var e=-c+"px";TweenMax.to(a,.6,{css:{right:e},ease:Circ.easeInOut,onComplete:endModuleComplete});break;case"module-position-cc":var e=$(window).width()+get_OffsetWidth()+"px";TweenMax.to(a,.6,{css:{left:e},ease:Circ.easeInOut,onComplete:endModuleComplete})}endModuleFunction=null}function endModuleComplete(){endPreviousModule=!1}function moduleNews(){function q(a){if(null!=moduleList){moduleList.disableList(),p=moduleList.currentPosition();var b=$(t_scrBarV1);TweenMax.to(b,.3,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:function(){b.css("display","none")}})}newsPrvH.css("display","inline");var c=$(i).width()+$(i).position().left+30,d=0;for(d;totalPreviews>d;d++)d==a?newsPrevItemArr[d].css("display","inline"):newsPrevItemArr[d].css("display","none");$(".news-preview-counter span").empty().append(a+1+"/"+totalPreviews),TweenMax.to(i,.6,{css:{left:-c},delay:.1,easing:Sine.easeOut}),TweenMax.to([newsPrvU,k],.6,{css:{left:"0px"},delay:.1,easing:Sine.easeOut,onComplete:r,onCompleteParams:[a]})}function r(a){var b=a*(j+l);0==previewNewsOpen?(previewNewsOpen=!0,newsPrvU.css("left",-b+"px"),newsPreviewItemDisplay("inline"),s(previewNewsOpen)):(null!=moduleList&&1==touchDevice&&moduleList.disableList(),$(".news-preview-counter span").empty().append(a+1+"/"+totalPreviews),TweenMax.to(newsPrvU,.6,{css:{left:-b},delay:.1,easing:Sine.easeOut,onComplete:s,onCompleteParams:[previewNewsOpen]}))}function s(){v(!0),null!=moduleList&&(moduleList.destroy(!1),moduleList=null);var d=0;for(d;totalPreviews>d;d++)d!=previewNewsIndex&&newsPrevItemArr[d].css("display","none");moduleUpdate(a,$("#module-news-preview-holder",b),$("#module-news-preview-container",b),"custom",0),previewNewsMediaParent=$(".media-holder-news-preview",newsPrevItemArr[previewNewsIndex]);var e=!0;if($("img",previewNewsMediaParent).length<=0&&$("#video-wrapper",previewNewsMediaParent).length<=0)audioPlayerPlay(),previewNewsMediaParent.empty().append('<img width="100%" class="opacity_0" onload="animateNewsPreviewMedia(this)" />'),$("img",previewNewsMediaParent).attr("src",f[previewNewsIndex]);else{var g=$("#video-wrapper",previewNewsMediaParent);if(g.length>0)if(audioPlayerPause(),void 0==g.attr("data-active-video"))insertVideo(g,previewNewsMediaParent,moduleUpdate_news);else{var h=$("iframe",g);h.length>0?$("iframe",g).attr("src",g.attr("data-url")):insertVideo(g,previewNewsMediaParent,moduleUpdate_news)}else audioPlayerPlay(),e=!1,moduleUpdate_news();(1==touchDevice||0==touchDevice)&&($("#module-news-preview-container",b).css("height",""),$("#module-news-preview-container",b).css("height",$("#module-news-preview-container",b).height()))}1==e&&newsPreviewItemDisplay("inline")}function u(a){0>a&&(a=0),a>totalPreviews-1&&(a=totalPreviews-1),a!=previewNewsIndex&&(v(!1),a!=previewNewsIndex&&checkActiveVideo($(".media-holder-news-preview",newsPrevItemArr[previewNewsIndex])),previewNewsIndex=a,r(previewNewsIndex))}function v(a){var c=$("."+shortNP+"-close",b);c.unbind("click"),1==a?(c.click(function(){w()}),TweenMax.to(c,.4,{css:{opacity:"1"},easing:Sine.easeOut})):TweenMax.to(c,.4,{css:{opacity:"0.5"},easing:Sine.easeOut})}function w(){previewNewsOpen=!1,newsPrvU.css("left",0);var a=0;for(a;totalPreviews>a;a++)a!=previewNewsIndex&&newsPrevItemArr[a].css("display","none");TweenMax.to([newsPrvU,k],.6,{css:{left:$(i).width()},delay:.1,easing:Sine.easeOut}),TweenMax.to($(t_scrBarV1),.3,{css:{opacity:"0"},easing:Sine.easeOut}),TweenMax.to(i,.6,{css:{left:"0"},delay:.1,easing:Sine.easeOut,onComplete:x}),checkActiveVideo($(".media-holder-news-preview",newsPrevItemArr[previewNewsIndex]))}function x(){audioPlayerPlay(),newsPrvH.css("display","none"),$(t_scrBarV1).css("display","none"),null!=moduleList&&(moduleList.destroy(!0),moduleList=null),1==touchDevice?setTimeout(function(){moduleUpdate(a,$("#module-news-vertical-holder",b),$("#module-news-vertical-holder div:first",b),sideType,null,null,0)},100):moduleUpdate(a,$("#module-news-vertical-holder",b),$("#module-news-vertical-holder div:first",b),sideType,null,null,p)}previewNewsOpen=!1,previewNewsIndex=0,previewNewsMediaParent="",newsPrevItemArr=new Array;var a=$(txt_modCont),b=$("#module-news-vertical",a),c=a.width();a.height(),newsPrvH=$(shortNPH),newsPrvU=$(shortNPU),moduleUpdate(a,$("#module-news-vertical-holder",b),$("#module-news-vertical-holder div:first",b),sideType);var e=-c+"px";a.attr("style","left:"+e+"; visibility:visible;"),TweenMax.to(a,.6,{css:{left:"0px"},delay:.1,ease:Circ.easeInOut}),endModuleFunction=endModuleTextPage,moduleEnd=!0,newsPrvH.css("display","inline");var f=new Array;$(b).find("."+shortNP+"-horizontal-fix").each(function(){$(this).css("width",999999);var a=$("ul li",this),b=0;a.each(function(){var a=$(".media-holder-news-preview",this),c=a.attr("data-src"),d=a.children().length>0?$("#video-wrapper",a):"null";newsPrevItemArr[b]=$(this),f[b]="null"==d?c:d,b++}),$("ul",this).css("width",$("ul",this).width()).css("left",c),$(this).css("width","")}),newsPrvH.css("display","");var g=$("."+shortNIV+"-read-more",b),h=rgb2hex(g.css("background-color")),i=$("#module-news-vertical-holder"),j=$("."+shortNP+"-horizontal-fix").width();g.hover(function(){TweenMax.to($(this),.6,{css:{backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(this),.6,{css:{backgroundColor:h},easing:Sine.easeOut})});var k=$("#"+shortNP+"-controls"),l=parseInt($("li:first",newsPrvU).css("margin-right"),10);k.css("left",c);var m=$(".news-item-vertical",b),n=$(".news-item-vertical-title",$(".news-item-vertical:first",b)),o=rgb2hex(n.css("color"));m.hover(function(){TweenMax.to($(".news-item-vertical-title",this),.6,{css:{color:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".news-item-vertical-title",this),.6,{css:{color:o},easing:Sine.easeOut})}),m.click(function(){previewNewsIndex=m.index(this),q(previewNewsIndex)});var p=0;totalPreviews=newsPrvU.children().length;var t=rgb2hex($("."+shortNP+"-backward ."+shortNP+"-backg").css("background-color"));$("."+shortNP+"-backward, ."+shortNP+"-forward, ."+shortNP+"-close").hover(function(){TweenMax.to($("."+shortNP+"-backg",this),.3,{css:{backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($("."+shortNP+"-backg",this),.3,{css:{backgroundColor:t},easing:Sine.easeOut})}),$("."+shortNP+"-backward, ."+shortNP+"-forward",b).click(function(){var a=previewNewsIndex;1==$(this).hasClass(""+shortNP+"-backward")?(a--,u(a)):1==$(this).hasClass(""+shortNP+"-forward")&&(a++,u(a))}),newsPrvU.wipetouch({tapToClick:!1,preventDefault:!1,wipeLeft:function(){var b=previewNewsIndex;b++,u(b)},wipeRight:function(){var b=previewNewsIndex;b--,u(b)}}),v(!0)}function animateNewsPreviewMedia(a){var b=$(a);TweenMax.to($(a).parent(),.3,{css:{height:b.height()},easing:Sine.easeOut}),TweenMax.to(b,.4,{css:{opacity:"1"},easing:Sine.easeOut,onComplete:moduleUpdate_news})}function newsPreviewItemDisplay(a){var b=0;for(b;totalPreviews>b;b++)newsPrevItemArr[b].css("display",a)}function moduleContact(){var a=$(txt_modCont),b=$("#module-wrapper",a);if(!(b.length<=0)){var c=$("#module-container #map-holder"),d=$(window).height();$(window).width();var f=screen.width,g=.5*-get_OffsetWidth(),h=c.height(),i=$("#module-contact-container #media-holder-contact",b);if(i.length>0){initialMediaH=i.height(),c.length>0&&c.remove(),h=parseInt(i.css("height"),10);var j=i.attr("data-src");i.attr("style","display: inline; visibility: visible;"),i.empty().append('<img  onload="animateMedia(this)" width="100%"/>'),$("img",i).css("opacity","0").attr("src",j)}if(c.length>0){c.attr("style","display: inline; visibility: visible;"),c.css("opacity","0").css("width",f),c.css("left",g+"px"),TweenMax.to(c,.3,{css:{opacity:"1"},easing:Sine.easeOut});var k=c.attr("data-size").split(","),l=c.attr("data-anchor").split(",")}var m=$(window).width()-get_OffsetWidth()-$(t_scrBarV2).width();1==touchDevice&&(m=$(window).width()-templateMenuW),b.css("width",m),$("div:first",b).height()<=$(window).height()&&(m+=$(t_scrBarV2).width()),b.css("width",m),moduleUpdate(a,b,$("div:first",b),sideType);var n=$("#module-container #module-contact"),o=n.height(),p=d-h>=o?d-h:o;n.attr("style","bottom: "+-p+"px; height: "+p+"px; visibility: visible;"),moduleUpdate_contact(),TweenMax.to(n,.6,{css:{bottom:"0px"},ease:Circ.easeInOut,onComplete:function(){c.length>0&&c.gMap({controls:{panControl:!0,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1},scrollwheel:!1,address:c.attr("data-address"),zoom:16,markers:[{latitude:c.attr("data-latitude"),longitude:c.attr("data-longitude"),icon:{image:c.attr("data-icon"),iconsize:[k[0],k[1]],iconanchor:[l[0],l[1]]}}]}),contactFormSetup()}});var q=$("#module-container").width();$("#module-contact-holder").css("left",.5*(q-$("#module-contact-holder").width())+"px"),endModuleFunction=null,moduleEnd=!0;var r="",s=rgb2hex($("#form-reset").css("background-color"));$("#form-reset, #form-send").hover(function(){TweenMax.to($(this),.6,{css:{backgroundColor:themeColor},ease:Circ.easeOut})},function(){TweenMax.to($(this),.6,{css:{backgroundColor:s},ease:Circ.easeOut})}),$(".form-input-half-left input, .form-input-half-right input, .form-input-large input, .form-input-textarea textarea").focus(function(){var a=$(this),b=a.parent();1==b.hasClass("form-input-error-border")&&setFormInputBorder(b,"form-input-error-border","form-input-border"),a.val()==a.attr("name")+" "+"*"&&(r=a.val(),a.val("")),TweenMax.to($(".form-input-background",b),.6,{css:{backgroundColor:"#ffffff",opacity:"1"},ease:Circ.easeOut})}),$(".form-input-half-left input, .form-input-half-right input, .form-input-large input, .form-input-textarea textarea").focusout(function(){var a=$(this);(""==a.val()||" "==a.val())&&a.val(r),TweenMax.to($(".form-input-background",a.parent()),.6,{css:{backgroundColor:"#9e9e9e",opacity:"0.2"},ease:Circ.easeOut})})}}function animateMedia(a){var b=$(txt_modCont),c=$("#module-wrapper",b),d=$("#media-holder-contact",c);if(d.length>0&&$(a,d).length>0){var e=$(a,d).height(),f=e>initialMediaH?initialMediaH:e;d.css("height",f)}TweenMax.to(a,.4,{css:{opacity:"1"},easing:Sine.easeOut,onComplete:moduleUpdate_contact})}function contactFormSetup(){function d(a,b){a.empty().append(b)}function e(){var a=!0,b=nameInst.val(),c=email.val(),d=phone.val(),e=messg.val(),f=[],g=0;return(b==nameDefTxt||""==b)&&nameInst.length>0&&(a=!1,f[g]=nameInst,g++),(c==emailDefTxt||""==c||0==isValidEmailAddress(c))&&email.length>0&&(a=!1,f[g]=email,g++),(d==phoneDefTxt||""==d||0==isValidPhone(d))&&phone.length>0&&(a=!1,f[g]=phone,g++),(e==messgDefTxt||""==e)&&messg.length>0&&(a=!1,f[g]=messg,g++),f=f.length>0?f:"null",{valid:a,highlightInp:f}}nameInst=$("#contact-form #name"),email=$("#contact-form #email"),phone=$("#contact-form #phone"),messg=$("#contact-form #message"),nameDefTxt=nameInst.val(),emailDefTxt=email.val(),phoneDefTxt=phone.val(),messgDefTxt=messg.val(),resetBtn=$("#contact-form #form-reset"),sendBtn=$("#contact-form #form-send"),sendBtnText=$("p",sendBtn).text(),btnTextSend=void 0!=sendBtn.attr("data-sending-txt")?sendBtn.attr("data-sending-txt"):"null";var a=[nameInst.parent(nameInst),email.parent(email),phone.parent(phone),messg.parent(messg)],b=$("#response-form");resetBtn.click(function(){resetFormValues(),setFormArrInputBorder(a,"form-input-error-border","form-input-border"),TweenMax.to(b,.4,{css:{opacity:0},delay:.1,easing:Sine.easeOut,onComplete:function(){$("p",b).css("display","inline-block"),$("#form-warning",b).css("display","inline-block")}})});var c=!1;sendBtn.click(function(){if(1!=c){var a=e();if(b.css("display","inline-block").css("opacity","0"),1==a.valid)c=!0,1==contactFormDemo?"null"!=btnTextSend&&(d($("p",sendBtn),btnTextSend),TweenMax.to(sendBtn,.6,{css:{opacity:.5},ease:Sine.easeOut,onComplete:function(){c=!1,d($("p",sendBtn),sendBtnText),TweenMax.to(sendBtn,.4,{css:{opacity:1},easing:Sine.easeOut}),runSendAnimation("inline-block","none","none")}})):("null"!=btnTextSend&&(d($("p",sendBtn),btnTextSend),TweenMax.to(sendBtn,.6,{css:{opacity:.5},ease:Sine.easeOut})),$.ajax({url:phpUrlPath,type:"post",data:{senderName:nameInst.val(),senderEmail:email.val(),senderPhone:phone.val(),senderMessage:messg.val()},dataType:"json",success:function(a){b.css("display","inline-block").css("opacity","1"),$("p",b).css("display","inline-block"),1==a.result?runSendAnimation("inline-block","none","none"):($("#server-error",b).empty().text(a.msg),runSendAnimation("none","none","inline-block")),d($("p",sendBtn),sendBtnText),TweenMax.to(sendBtn,.4,{css:{opacity:1},easing:Sine.easeOut}),c=!1}}));else{if("null"!=a.highlightInp)for(var f=a.highlightInp,g=f.length;g--;){var h=f[g].parent(f[g]);setFormInputBorder(h,"form-input-border","form-input-error-border")}b.css("display","inline-block").css("opacity","0"),$("p",b).css("display","none"),$("#form-warning",b).css("display","inline-block"),TweenMax.to(b,.4,{css:{opacity:1},delay:.1,easing:Sine.easeOut})}}})}function resetFormValues(){nameInst.length>0&&nameInst.val(nameDefTxt),email.length>0&&email.val(emailDefTxt),phone.length>0&&phone.val(phoneDefTxt),messg.length>0&&messg.val(messgDefTxt)}function runSendAnimation(a,b,c){var d=$("#response-form");if(d.length>0){resetFormValues(),d.css("display","inline-block").css("opacity","0"),$("p",d).css("display",a),$("#form-warning",d).css("display",b),$("#server-error",d).css("display",c);var e="none"!=c?2:1.3;TweenMax.to(d,.4,{css:{opacity:1},easing:Sine.easeOut,onComplete:function(){TweenMax.to(d,.4,{css:{opacity:0},delay:e,easing:Sine.easeOut})}})}}function setFormArrInputBorder(a,b,c){if(1==$.isArray(a))for(var d=a.length;d--;)setFormInputBorder(a[d],b,c)}function setFormInputBorder(a,b,c){1==a.hasClass(b)&&a.removeClass(b),0==a.hasClass(c)&&a.addClass(c)}function isValidPhone(a){var b=new RegExp(/^[0-9-+]+$/);return b.test(a)}function isValidEmailAddress(a){var b=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return b.test(a)}function moduleShowreel(){var a=$(txt_modCont),b=$("#module-showreel",a);if(!(b.length<=0)){a.attr("data-id");var d=b.width();moduleUpdate(a,b,$("div:first",b),sideType),b.css("width","0px").css("visibility","visible");var e=$("#video-wrapper",a),f=$("#module-showreel-holder",b);1==touchDevice&&(e.children().length>0&&(tempVid=$("div:first",e),f.empty(),f.append(tempVid)),e=$("#video-wrapper",a)),e.empty(),audioPlayerPause(),e.length>0&&templateAddMediaVideo(e.attr("data-video-type"),e,void 0),TweenMax.to(b,.4,{css:{width:d+"px"},ease:Quad.easeOut}),endModuleFunction=endModuleShowreel,moduleEnd=!0}}function endModuleShowreel(){var a=$("#module-showreel");a.width(),TweenMax.to(a,.6,{css:{width:"0px"},ease:Quad.easeInOut,onComplete:function(){destroyVideoJS()}}),audioPlayerPlay(),endModuleFunction=null}function reverseEndModuleShowreel(){var a=$(txt_modCont),b=$("#module-showreel",a);if(!(b.length<=0)){b.css("visibility","hidden"),b.css("width","");var c=b.width();b.css("width","0px").css("visibility","visible");var d=$("#video-wrapper",a),e=$("#module-showreel-holder",b);1==touchDevice&&d.children().length>0&&(tempVid=$("div:first",d),e.empty(),e.append(tempVid)),d=$("#video-wrapper",a),d.empty(),d.length>0&&templateAddMediaVideo(d.attr("data-video-type"),d,void 0),TweenMax.to(b,.4,{css:{width:c+"px"},ease:Quad.easeOut}),endModuleFunction=endModuleShowreel,moduleEnd=!0}}function moduleFullscreenVideo(){var a=$(txt_modCont),b=$("#module-fullscreen-video",a),c=$(window).width()-get_OffsetWidth(),d=$(window).height();b.css("opacity","0"),b.attr("style","width:"+c+"px; height:"+d+"px;"),a.css("visibility","visible"),TweenMax.to(b,.6,{css:{opacity:"1"},ease:Circ.easeOut}),audioPlayerPause();var e=$("#video-wrapper",a);if(e.length>0){e.attr("data-width",c),e.attr("data-height",d);var f=$("#fullscreen-video-holder",b);1==touchDevice&&(e.children().length>0&&(tempVid=$("div:first",e),f.empty(),f.append(tempVid)),e=$("#video-wrapper",a)),e.empty(),templateAddMediaVideo(e.attr("data-video-type"),e,void 0)}}function modulePricingTables(){var a=$(txt_modCont),b=$("#module-pricing",a);if(!(b.length<=0)){a.width(),a.height(),moduleUpdate(a,b,$("div:first",b),sideType);var e=parseInt(a.css("left"),10);a.css("left","100%").css("visibility","visible"),TweenMax.to(a,.5,{css:{left:e},delay:.1,ease:Circ.easeOut}),$("#pricing-column-holder",b).hover(function(){$(this).css("z-index",2),$.browser.msie?"8.0"!=$.browser.version&&"9.0"==$.browser.version&&1==isIE9Std()&&0==$(this).hasClass("shadow-side-all-pricing-tables")&&$(this).addClass("shadow-side-all-pricing-tables"):0==$(this).hasClass("shadow-side-all-pricing-tables")&&$(this).addClass("shadow-side-all-pricing-tables"),TweenMax.to($("div:first",this),.4,{css:{backgroundColor:themeColor},ease:Sine.easeOut})},function(){$(this).css("z-index",1),$.browser.msie?"8.0"!=$.browser.version&&"9.0"==$.browser.version&&1==isIE9Std()&&1==$(this).hasClass("shadow-side-all-pricing-tables")&&$(this).removeClass("shadow-side-all-pricing-tables"):1==$(this).hasClass("shadow-side-all-pricing-tables")&&$(this).removeClass("shadow-side-all-pricing-tables"),TweenMax.to($("div:first",this),.4,{css:{backgroundColor:"#909090"},ease:Sine.easeOut})}),$("#pricing-column-holder #pricing-buy-holder",b).hover(function(){TweenMax.to($(this),.4,{css:{backgroundColor:themeColor},ease:Sine.easeOut})},function(){TweenMax.to($(this),.4,{css:{backgroundColor:"#3F3F3F"},ease:Sine.easeOut})})}}function customHoverAnimation(a,b,c,d){var e=getDirectionCSS(c,{x:b.pageX,y:b.pageY});"over"==a?(d.removeClass(),d.css("left",e.from.val1),d.css("top",e.from.val2),TweenMax.to(d,.3,{css:{left:e.to.val1,top:e.to.val2},ease:Sine.easeInOut})):"out"==a&&TweenMax.to(d,.3,{css:{left:e.from.val1,top:e.from.val2},ease:Sine.easeInOut})}function moduleFullWidth(){var a=$(txt_modCont),b=$("#module-full-width",a),c=$("#module-wrapper",b);if(!(b.length<=0)){var d=$(window).width()-get_OffsetWidth(),e=$("#module-full-width-media");if(1==touchDevice&&(d=$(window).width()-templateMenuW),b.css("width",d),$("#module-full-width-holder-text",b).height()>$(window).height()&&0==touchDevice&&(d-=$(t_scrBarV2).width()),a.css("opacity","0"),a.css("visibility","visible"),e.css("height","200px"),TweenMax.to(a,.6,{css:{opacity:"1"},ease:Circ.easeOut}),void 0!=e.attr("data-src"))audioPlayerPlay(),e.empty().append('<img onload="animateFullWidthMedia(this)" width="100%" />'),$("img",e).css("opacity","0").attr("src",e.attr("data-src"));else{var f=$("#video-wrapper",e);1==touchDevice&&f.children().length>0&&(tempVid=$("div:first",f),e.empty(),e.append(tempVid)),f=$("#video-wrapper",e),f.length>0?(audioPlayerPause(),b.css("width",d),f.attr("data-width",e.width()),e.css("height",f.attr("data-height")),moduleUpdate(a,c,$("div:first",c),sideType),templateAddMediaVideo(f.attr("data-video-type"),f,void 0),moduleUpdate_full_width(!0)):moduleUpdate_full_width(!0)}}}function animateFullWidthMedia(a){var b=$(a);TweenMax.to($(a).parent(),.4,{css:{height:b.height()},easing:Sine.easeOut}),TweenMax.to(b,.4,{css:{opacity:"1"},easing:Sine.easeOut,onComplete:function(){$(a).parent().css("overflow","visible").css("height",""),moduleUpdate_full_width(!0)}})}function moduleFullWidthGallery(){var a=$(txt_modCont),b=$("#module-full-width-gallery",a);if(!(b.length<=0)){var c=$(".full-width-item",b),d=$(window).width()-get_OffsetWidth()-$(t_scrBarV2).width();initialThumbW=c.width(),initialThumbH=c.height(),1==touchDevice&&(d=$(window).width()-get_OffsetWidth()),checkItems(),b.css("width",d),a.css("opacity","0").css("visibility","visible"),TweenMax.to(a,.6,{css:{opacity:"1"},ease:Circ.easeOut}),moduleUpdate(a,b,$("div:first",b),sideType),c.hover(function(a){customHoverAnimation("over",a,$(this),$("#thumb-image-hover",this))},function(a){customHoverAnimation("out",a,$(this),$("#thumb-image-hover",this))}),setFullWidthPreview(),storeFullWidthPreviewMedia(),c.click(function(){currIndex=0,changeFWPreviewMediaDesc(-1);var a=$(".full-width-item").index(this);return"link"==previewMediaArr[a]?(window.open(portfolioLinkArr[a].url,portfolioLinkArr[a].target),void 0):(currIndex=a,null!=moduleList&&moduleList.disableList(),$("#full-width-preview-media-holder").find("#preview-media-holder").empty(),loadFullWidthPreview(a),void 0)})}}function storeFullWidthPreviewMedia(){previewMediaArr=new Array,portfolioLinkArr=[],portfolioSocialArr=[];var a=0;$("#full-width-preview #full-width-preview-media-holder").find("#preview-media-holder").children().each(function(){"preview-media-image"==$(this).attr("id")?previewMediaArr[a]='<img id="preview-media-image" src="'+$(this).attr("data-url")+'" title="'+$(this).attr("data-title")+'"'+' alt="'+$(this).attr("data-alt")+'" />':"video-wrapper"==$(this).attr("id")?($(this).attr("data-type"),previewMediaArr[a]=$(this)):"link"==$(this).attr("id")&&(previewMediaArr[a]="link",portfolioLinkArr[a]={url:$(this).attr("data-url"),target:$(this).attr("data-target")}),a++}),previewMediaDescArr=new Array,a=0,$(".full-width-info-holder").find(".full-width-info-holder-desc").each(function(){previewMediaDescArr[a]=$(this).get(0),a++}),$("#full-width-preview-media-holder").find("#preview-media-holder").empty()}function changeFWPreviewMediaDesc(a,b){if(-1!=a){var c=previewMediaDescArr[a];TweenMax.to($(c),.4,{css:{opacity:"0"},ease:Circ.easeOut,onComplete:hideFWPrevMediaDesc,onCompleteParams:[a]})}else $(".full-width-info-holder").find(".full-width-info-holder-desc").each(function(){$(this).css("display","none")});if(-1!=b&&void 0!=b){var d=previewMediaDescArr[b];previewSetSocial(d),$(d).attr("style","visibility: visible; display: inline;"),$(d).css("opacity","0"),TweenMax.to($(d),.6,{css:{opacity:"1"},ease:Circ.easeOut})}}function previewSetSocial(a){$("#social-holder",a).length>0&&$("#social-holder",a).find("div").each(function(){var a=$(this);if(void 0!=a.attr("data-src")){var b=a.attr("style");a.attr("style","");var c='<iframe allowtransparency="true" frameborder="0" scrolling="no" src="'+a.attr("data-src")+'" style="'+b+'"></iframe>';a.replaceWith(c)}})}function hideFWPrevMediaDesc(a){var b=previewMediaDescArr[a];$(b).attr("style","visibility: hidden; display: inline;"),$(b).css("opacity","0")}function emptyPreviewMediaHolder(){$("#full-width-preview-media-holder").find("#preview-media-holder").find("iframe").attr("src",""),setTimeout(function(){$("#full-width-preview-media-holder").find("#preview-media-holder").empty()},100)}function updateFullWidthPreviewPosition(){var a=$("#full-width-preview"),b=$("#full-width-preview-info-holder",a),c=$("#full-width-preview-media-holder"),d=$(window).width(),e=$(window).height();d>=768&&b.css("position","fixed").css("top","0px").css("right","0px").css("bottom","auto").css("height","100%").css("width","");var f=b.width(),g=768>d?0:f;0>=g?(smpPrevOpen=!1,$(".preview-smartphone-info").length>0&&($("span.hide_info",$(".preview-smartphone-info")).css("display","none"),$("span.show_info",$(".preview-smartphone-info")).css("display","block"),$(".preview-smartphone-info").css("display","inline"))):$(".preview-smartphone-info").length>0&&($("span.hide_info",$(".preview-smartphone-info")).css("display","none"),$("span.show_info",$(".preview-smartphone-info")).css("display","block"),$(".preview-smartphone-info").css("display","none"));var h=768>d?prevRatio*e:0,i=d-g,j=e-h;c.attr("style","width:"+i+"px; height:"+j+"px;");var k=-(.5*(h+$(".preview-arrow-backward").height()));0>=g&&b.css("position","absolute").css("top","100%").css("width","100%").css("z-index","999"),$(".preview-arrow-backward").css("margin-top",k+"px"),$(".preview-arrow-forward").css("margin-top",k+"px"),$(".preview-arrow-close").css("right",g),$(".preview-arrow-forward").css("right",g);var l=fwMediaType;if("preview-media-image"==l){var m=$("#preview-media-load");$(m).css("width",""),$(m).css("height",""),checkSizeMedia($(m),i,j);var n=$(m).width()+2*previewBorderSize,o=$(m).height()+2*previewBorderSize,p=.5*-o,q=.5*-n;$("#preview-media-holder").attr("style","width: 100%; height: 100%; margin: 0px; top: 50%; left: 50%; margin-top:"+p+"px; margin-left:"+q+"px;")}}function loadFullWidthPreview(){function g(){n(!0),o(),$(".full-width-preview-media-holder-background, .preview-arrow-close",b).click(function(){emptyPreviewMediaHolder(),n(!1)})}function n(a){function o(){previewFullWidthOpen=!1,justOpenedPreivew=!0,animationLoadFWPreviewDone=!0,$("#full-width-preview-media-holder",b).unbind("click"),$(".preview-arrow-close",b).unbind("click"),TweenMax.to(b,.4,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:p})}function p(){audioPlayerPlay(),null!=moduleList&&moduleList.enableList(),b.css("display","none")}e=$(window).width(),f=$(window).height(),i=768>e?0:h,j=768>e?prevRatio*f:0;var g=-i+"px";if(0>=i){var k=-(.5*(j+$(".preview-arrow-backward").height()));$(".preview-arrow-backward").css("margin-top",k+"px"),$(".preview-arrow-forward").css("margin-top",k+"px"),d.css("position","absolute").css("top","100%").css("width","100%").css("z-index","999"),$(".preview-smartphone-info").length>0&&$(".preview-smartphone-info").css("display","block")}else $(".preview-smartphone-info").length>0&&$(".preview-smartphone-info").css("display","none");if($(".preview-smartphone-info").length>0){if($(".preview-smartphone-info").unbind("click"),0==touchDevice){var l=$(".preview-smartphone-info"),m=rgb2hex($("span",l).css("color")),n=rgb2hex($(".preview-smartphone-info-backg",l).css("background-color"));$(".preview-smartphone-info").hover(function(){TweenMax.to($(".preview-smartphone-info-backg",this),.4,{css:{backgroundColor:themeColor},ease:Sine.easeOut}),TweenMax.to($("span",this),.4,{css:{color:"#ffffff"},ease:Sine.easeOut})},function(){TweenMax.to($(".preview-smartphone-info-backg",this),.4,{css:{backgroundColor:n},ease:Sine.easeOut}),TweenMax.to($("span",this),.4,{css:{color:m},ease:Sine.easeOut})})}$(".preview-smartphone-info").unbind("click"),$(".preview-smartphone-info").bind("click",function(){0==smpPrevOpen?(smpPrevOpen=!0,$("span.hide_info",this).css("display","block"),$("span.show_info",this).css("display","none"),d.css("right","0px"),TweenMax.to(d,.3,{css:{top:"0px"},ease:Quad.easeInOut})):(smpPrevOpen=!1,$("span.hide_info",this).css("display","none"),$("span.show_info",this).css("display","block"),d.css("right","0px"),TweenMax.to(d,.3,{css:{top:"100%"},ease:Quad.easeInOut}))})}1==a?(0>=i&&d.css("bottom",-j),changeFWPreviewMediaDesc(-1,currIndex),d.css("visibility","visible"),i>0?TweenMax.to(d,.3,{css:{right:"0px"},delay:.1,ease:Quad.easeInOut}):TweenMax.to(d,.3,{css:{bottom:"0px"},delay:.1,ease:Quad.easeInOut})):($(".preview-smartphone-info",b).length>0&&$(".preview-smartphone-info",b).css("display","none"),TweenMax.to(c,.3,{css:{opacity:"0"},ease:Circ.easeInOut}),TweenMax.to([$(".preview-arrow-close"),$(".preview-arrow-forward"),$(".preview-arrow-backward")],.3,{css:{opacity:"0"},ease:Circ.easeInOut}),i>0?TweenMax.to(d,.3,{css:{right:g},ease:Circ.easeInOut,onComplete:o}):TweenMax.to(d,.3,{css:{bottom:-j},ease:Circ.easeInOut,onComplete:o}))}function o(){c.css("opacity","0"),c.css("visibility","visible"),TweenMax.to(c,.2,{css:{opacity:"1"},easing:Sine.easeOut}),TweenMax.to($(".full-width-preview-media-loader"),.3,{css:{opacity:"1"},easing:Sine.easeOut}),loadFullWidthMedia()}previewFullWidthOpen=!0;var b=$("#full-width-preview"),c=$("#full-width-preview-media-holder");if(!(b.length<=0)){b.css("opacity","0"),b.css("display","inline"),b.css("visibility","visible");var d=$("#full-width-preview-info-holder",b),e=$(window).width(),f=$(window).height();e>=768&&(d.css("position","fixed").css("top","0px").css("bottom","auto").css("height","100%").css("width",""),d.css("right",-d.width())),TweenMax.to(b,.4,{css:{opacity:"1"},easing:Sine.easeOut,onComplete:g});var h=d.width(),i=768>e?0:h;0>=i?$(".preview-smartphone-info").length>0&&(prevRatio=parseInt($(".preview-smartphone-info").height())/f):$(".preview-smartphone-info").length>0&&$(".preview-smartphone-info").css("display","none");var j=768>e?prevRatio*f:0,k=e-i,l=f-j;
c.attr("style","width:"+k+"px; height:"+l+"px;");var m=-(.5*(j+$(".preview-arrow-backward").height()));$(".preview-arrow-backward").css("margin-top",m+"px"),$(".preview-arrow-forward").css("margin-top",m+"px"),$(".preview-arrow-close").css("right",i),$(".preview-arrow-forward").css("right",i)}}function loadFullWidthMedia(){var a=previewMediaArr[currIndex],b=$(a).attr("id"),c=$("#full-width-preview-media-holder");if("preview-media-image"==b){audioPlayerPlay();var d=c.width()-2*previewBorderSize,e=c.height()-2*previewBorderSize,f=$("#preview-media-load");fwMediaType=b,fwW=d,fwH=e,f.css("opacity","0");var g=c.find("#preview-media-holder");g.append('<img id="preview-media-load" onload="animateFullWidthPreviewMedia()" title="" alt="" />'),f=$("#preview-media-load"),f.attr("style","visibility: visible; display: inline;"),f.css("opacity","0"),f.attr("src",$(a).attr("src")),f.attr("title",$(a).attr("title")),f.attr("alt",$(a).attr("alt"))}else if("video-wrapper"==b){audioPlayerPause(),c.find("#preview-media-holder").empty();var g=$("#preview-media-holder"),h=parseInt($(a).attr("data-width"),10),i=parseInt($(a).attr("data-height"),10);h=h<=$(window).width()?h:$(window).width(),i=i<=$(window).height()?i:.5*$(window).width();var j=h+2*previewBorderSize,k=i+2*previewBorderSize,l=.5*-k,m=.5*-j;g.attr("style","width: "+j+"px; height: "+k+"px; margin: 0px; top: 50%; left: 50%; margin-top:"+l+"px; margin-left:"+m+"px;"),g.append('<div id="video-wrapper"></div>'),templateAddMediaVideo($(a).attr("data-video-type"),$(a),$("#video-wrapper")),TweenMax.to($(".full-width-preview-media-loader"),.3,{css:{opacity:"0"},easing:Sine.easeOut}),loadingAnimationDone=!0,animationLoadFWPreviewDone=!0,fwMediaType=b,fullWidthFadeInMedia(b)}}function animateFullWidthPreviewMedia(){var a=fwMediaType,b=fwW,c=fwH,d="";if("preview-media-image"==a&&(d=$("#preview-media-load"),$(d).css("width",""),$(d).css("height",""),checkSizeMedia($(d),b,c)),animationLoadFWPreviewDone=!0,null!=$(d).width()){var e=$(d).width()+2*previewBorderSize,f=$(d).height()+2*previewBorderSize,g=.5*-f,h=.5*-e,i=$("#preview-media-holder");i.attr("style","width: "+e+"px; height: "+f+"px; margin: 0px; top: 50%; left: 50%; margin-top:"+g+"px; margin-left:"+h+"px;"),TweenMax.to($(".full-width-preview-media-loader"),.2,{css:{opacity:"0"},easing:Sine.easeOut}),fullWidthFadeInMedia(a),loadingAnimationDone=!0}}function fullWidthFadeInMedia(a){if("preview-media-image"==a&&TweenMax.to($("#preview-media-load"),.6,{css:{opacity:"1"},ease:Circ.easeOut}),1==justOpenedPreivew){justOpenedPreivew=!1;var b=$("#full-width-preview-media-holder");b.width()-60;var d=$(".preview-arrow-close"),e=$(".preview-arrow-backward"),f=$(".preview-arrow-forward");d.css("opacity","0").css("display","inline"),e.css("opacity","0").css("display","inline"),f.css("opacity","0").css("display","inline"),TweenMax.to([d,e,f],.6,{css:{opacity:"1"},ease:Circ.easeInOut});var g=$(".preview-arrow-backward .preview-arrow-backg").css("opacity"),h=rgb2hex($(".preview-arrow-backward .preview-arrow-backg").css("background-color"));$(".preview-arrow-backward, .preview-arrow-forward, .preview-arrow-close").unbind("mouseenter mouseleave"),$(".preview-arrow-backward, .preview-arrow-forward, .preview-arrow-close").hover(function(){TweenMax.to($(".preview-arrow-backg",this),.3,{css:{opacity:"1",backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".preview-arrow-backg",this),.3,{css:{opacity:g,backgroundColor:h},easing:Sine.easeOut})}),$(".preview-arrow-backward").unbind("click"),$(".preview-arrow-forward").unbind("click"),$(".preview-arrow-backward").click(function(){TweenMax.to($(".full-width-preview-media-loader"),.3,{css:{opacity:"1"},easing:Sine.easeOut}),$("#full-width-preview-media-holder").find("#preview-media-holder").find("iframe").attr("src",""),setTimeout(function(){console.log("doing setTimeout so DOM refreshes properly!!"),changeFullWidthPreviewMedia(-1)},100)}),$(".preview-arrow-forward").click(function(){TweenMax.to($(".full-width-preview-media-loader"),.3,{css:{opacity:"1"},easing:Sine.easeOut}),$("#full-width-preview-media-holder").find("#preview-media-holder").find("iframe").attr("src",""),setTimeout(function(){changeFullWidthPreviewMedia(1)},100)})}}function changeFullWidthPreviewMedia(a){var b=currIndex+a;if(b>previewMediaArr.length-1?b=0:0>b&&(b=previewMediaArr.length-1),"link"==previewMediaArr[b]){var c=previewMediaArr[currIndex];return changeFWPreviewMediaDesc(currIndex),currIndex=b,changeFullWidthPreviewMedia(a),void 0}if(currIndex!=b){var c=previewMediaArr[currIndex];"preview-media-image"==$(c).attr("id")?($("#preview-media-load").css("opacity",0),$("#preview-media-load").attr("style","visibility: hidden; display: none;")):"video-wrapper"==$(c).attr("id")&&($(c).css("opacity","0"),$(c).attr("style","visibility: hidden; display: none;")),changeFWPreviewMediaDesc(currIndex,b),currIndex=b,c=previewMediaArr[currIndex],$("#full-width-preview-media-holder").find("#preview-media-holder").empty(),loadFullWidthMedia()}}function setFullWidthPreview(){var a=$("#full-width-preview");$("#full-width-preview").length>0&&(a.remove(),$("#template-wrapper").after(a))}function checkItems(){var a=$(window).width()-get_OffsetWidth()-$(t_scrBarV2).width(),b=$(txt_modCont),c=$("#module-full-width-gallery",b),d=a/maximNumberColumns,e=d/initialThumbW,f=initialThumbH/initialThumbW*d;if(!(0>=initialThumbW)){if(1==touchDevice&&(a=$(window).width()-get_OffsetWidth()),c.css("width",a),e>=.8&&1>=e)d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d;else if(.8>e||e>1)if(d=a/(maximNumberColumns-1),e=d/initialThumbW,1>=e){for(maximNumberColumns--,d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d,e=d/initialThumbW;.8>e;)maximNumberColumns--,d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d,e=d/initialThumbW;if(e>1)for(d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d;d>initialThumbW;)maximNumberColumns++,d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d}else for(d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d;d>initialThumbW;)maximNumberColumns++,d=a/maximNumberColumns,f=initialThumbH/initialThumbW*d;var g=0,h=0;$("#module-full-width-holder").find(".full-width-item").each(function(){$(this).css("position","absolute");var a=0,b=0;maximNumberColumns>g?(a=Math.round(f)*h,b=Math.round(d)*g,g++):(g=0,h++,a=Math.round(f)*h,b=Math.round(d)*g,g++),0==touchDevice?(TweenMax.to($("img",this),.6,{css:{width:Math.round(d),height:Math.round(f)},easing:Sine.easeOut}),TweenMax.to($(this),.6,{css:{width:Math.round(d),height:Math.round(f),left:b,top:a},easing:Sine.easeOut})):($("img",this).css("width",Math.round(d)).css("height",Math.round(f)),$(this).css("width",Math.round(d)).css("height",Math.round(f)).css("left",b).css("top",a))}),h++,$("div:first",c).css("height",h*Math.round(f))}}function modulePageColumns(){function o(a,b){if("slides"!=b)return b;var c=new Array,d=0;return a.children().each(function(){void 0!=$(this).attr("data-src")&&(c[d]=$(this).attr("data-src"),d++)}),c}function p(){if(0==touchDevice){var a=$(".col-prev-media-arrow-backward .col-prev-media-arrow-backg").css("opacity"),b=rgb2hex($(".col-prev-media-arrow-backward .col-prev-media-arrow-backg").css("background-color")),c=$(".col-prev-media-arrow-backward, .col-prev-media-arrow-forward");c.unbind("mouseenter mouseleave"),c.hover(function(){TweenMax.to($(".col-prev-media-arrow-backg",this),.3,{css:{opacity:"1",backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".col-prev-media-arrow-backg",this),.3,{css:{opacity:a,backgroundColor:b},easing:Sine.easeOut})})}r()}function q(){var a=$(".col-prev-media-arrow-backward"),b=$(".col-prev-media-arrow-forward");a.unbind("click"),b.unbind("click")}function r(){var a=$(".col-prev-media-arrow-backward"),b=$(".col-prev-media-arrow-forward");a.unbind("click"),a.click(function(){q(),u(-1)}),b.unbind("click"),b.click(function(){q(),u(1)})}function u(a){s=sCurrIdx,sCurrIdx+=a,0>sCurrIdx&&(sCurrIdx=t-1),sCurrIdx>=t&&(sCurrIdx=0);var b=columnsPrevItemMediaArr[columnsPreviewIndex];b[s].css("z-index",1).attr("id",""),b[sCurrIdx].css("z-index",2).css("opacity","0").attr("id","col-prev-media-slide-curr");var c=b[sCurrIdx],d=b[sCurrIdx].parent(),e=d.height(),f=c.height(),g=0;e!=f&&(g=.3,TweenMax.to(d,.3,{css:{height:f},easing:Sine.easeOut})),TweenMax.to(b[sCurrIdx],.5,{css:{opacity:"1"},delay:g,easing:Sine.easeOut,onComplete:function(){r(),v()}})}function v(){var a=0,b=columnsPrevItemMediaArr[columnsPreviewIndex],c=b.length;for(a=0;c>a;a++)a!=sCurrIdx&&b[a].css("opacity","0")}function x(a){var c=$("#module-columns-preview-holder").width(),d=parseInt($("li:first",".columns-preview-horizontal-fix ul").css("margin-right"),10),e=a*(c+d);if(null!=moduleList&&moduleList.disableList(),previewAnimDone=!1,0==columnsPreviewOpen)columnsPreviewOpen=!0,$(".columns-preview-horizontal-fix ul").css("left",-e),g.css("opacity","0").css("display","inline"),TweenMax.to(g,.6,{css:{opacity:"1"},delay:.3,easing:Sine.easeOut}),y(columnsPreviewOpen);else{var f=$("div:first",g);f.css("height","auto"),$(".columns-preview-horizontal-fix",b).css("height","auto"),TweenMax.to($("#module-columns-preview",b),.3,{css:{top:"0px"},easing:Sine.easeOut}),TweenMax.to($(".columns-preview-horizontal-fix ul"),.6,{css:{left:-e},delay:.1,easing:Sine.easeOut,onComplete:y,onCompleteParams:[columnsPreviewOpen]})}$(".columns-preview-counter span","#columns-preview-controls").empty().append(a+1+"/"+totalColPreviews)}function y(){null!=moduleList&&moduleList.enableList(),A(!0),null!=moduleList&&(moduleList.destroy(!1),moduleList=null);var c=0;for(c;totalColPreviews>c;c++)c!=columnsPreviewIndex&&columnsPrevItemArr[c].css("display","none");previewSetSocial(columnsPrevItemArr[columnsPreviewIndex]),moduleUpdate(a,g,$("div:first",g),sideType);var d=$(".columns-preview-media",columnsPrevItemArr[columnsPreviewIndex]),e=!0;if($("img",d).length>0&&(audioPlayerPlay(),e=!1,moduleUpdate_page_columns(),z(d)),$("img",d).length<=0&&$("#video-wrapper",d).length<=0){audioPlayerPlay();var f=$.isArray(columnsPrevItemMediaArr[columnsPreviewIndex]);if(1==f){s=0,sCurrIdx=0;var h=columnsPrevItemMediaArr[columnsPreviewIndex],i=h.length,j="";d.empty();var k="",l="";for(t=i;i--;){0==i&&(k="col-prev-media-slide-curr",l="animateColPreviewMedia(this)"),j='<img id="'+k+'" width="100%" class="col-prev-media-slide opacity_0" onload="'+l+'" />',d.prepend(j);var m=$("img",d).first();m.attr("src",h[i]),h[i]=m}colSlidesControl=tempSlidesControl,""!=colSlidesControl&&(colSlidesControl.css("opacity","0"),d.append(colSlidesControl),p())}else colSlidesControl="",d.empty().append('<img width="100%" class="opacity_0" onload="animateColPreviewMedia(this)" />'),$("img",d).attr("src",columnsPrevItemMediaArr[columnsPreviewIndex])}else{colSlidesControl="",previewAnimDone=!0;var n=$("#video-wrapper",d);if(n.length>0)if(audioPlayerPause(),void 0==n.attr("data-active-video"))insertVideo(n,d,moduleUpdate_page_columns);else{var o=$("iframe",n);o.length>0?$("iframe",n).attr("src",n.attr("data-url")):insertVideo(n,d,moduleUpdate_page_columns)}else e=!1,moduleUpdate_page_columns()}1==e&&colPreviewItemDisplay("inline")}function z(a,b){var c=$.isArray(columnsPrevItemMediaArr[columnsPreviewIndex]);if(""!=colSlidesControl&&TweenMax.to(colSlidesControl,.3,{css:{opacity:"0"},easing:Sine.easeOut}),1==c){var d=columnsPrevItemMediaArr[columnsPreviewIndex],e=d.length;if(t=e,1==b)return $("#col-prev-media-slide-curr",a).css("z-index","1"),d[0].css("z-index","2"),TweenMax.to(d[0],.2,{css:{opacity:"1"},delay:.7,easing:Sine.easeOut}),void 0;for(;e--;){var f=1,g=0;0==e&&(f=2,g=1),d[e].css("z-index",f).css("opacity",g)}colSlidesControl=tempSlidesControl,""!=colSlidesControl&&(colSlidesControl.css("opacity","0"),a.append(colSlidesControl),p(),TweenMax.to(colSlidesControl,.4,{css:{opacity:"1"},easing:Sine.easeOut}))}s=0,sCurrIdx=0}function A(a){$(".columns-preview-close",b).unbind("click"),1==a?($(".columns-preview-close",b).click(function(){B()}),TweenMax.to($(".columns-preview-close",b),.4,{css:{opacity:"1"},easing:Sine.easeOut})):TweenMax.to($(".columns-preview-close",b),.4,{css:{opacity:"0.5"},easing:Sine.easeOut})}function B(){columnsPreviewOpen=!1,TweenMax.to($(t_scrBarV2),.3,{css:{opacity:"0"},easing:Sine.easeOut}),TweenMax.to(g,.4,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:C}),checkActiveVideo($(".columns-preview-media",columnsPrevItemArr[columnsPreviewIndex]))}function C(){audioPlayerPlay(),z($(".columns-preview-media",columnsPrevItemArr[columnsPreviewIndex])),$("div:first",g).css("height",""),g.css("opacity","0").css("display","none"),$(t_scrBarV2).css("display","none"),$(".columns-preview-horizontal-fix ul",b).find("li").each(function(){$(this).css("display","none")}),$(".columns-preview-horizontal-fix ul",b).css("left","0"),null!=moduleList&&(moduleList.resetPosition(0),moduleList.disableList(),moduleList.destroy(),moduleList=null),f.css("opacity","0").css("display","inline"),moduleUpdate_page_columns(w),TweenMax.to(f,.6,{css:{opacity:"1"},easing:Sine.easeOut}),$("#filter-buttons-holder",b).find(".filter-button").each(function(){var a=$(this),b=a.attr("data-filter");void 0!=b&&"*"==b?(a.addClass("selected"),TweenMax.to(a,.3,{css:{color:"#ffffff",backgroundColor:themeColor},ease:Sine.easeOut})):1==a.hasClass("selected")&&a.removeClass("selected").css("color","#3f3f3f").css("background-color","transparent")})}function E(a){z($(".columns-preview-media",columnsPrevItemArr[columnsPreviewIndex]),!0),0>a&&(a=0),a>totalColPreviews-1&&(a=totalColPreviews-1),a!=columnsPreviewIndex&&(A(!1),a!=columnsPreviewIndex&&checkActiveVideo($(".columns-preview-media",columnsPrevItemArr[columnsPreviewIndex])),columnsPreviewIndex=a,x(columnsPreviewIndex))}columnsPreviewOpen=!1,previewAnimDone=!0,columnsPreviewIndex=0,columnsPrevItemArr=new Array,totalColPreviews=0;var a=$(txt_modCont),b=$("#module-columns",a);if(!(b.length<=0)){a.attr("data-id"),a.width(),a.height();var f=$("#module-columns-wrapper",a),g=$("#module-columns-preview-wrapper",a);checkColumnSize(),moduleUpdate(a,f,$("div:first",f),sideType);var h=.5*Math.abs($("#module-container").width()-a.width());a.css("left","100%").css("visibility","visible"),TweenMax.to(a,.6,{css:{left:h},ease:Circ.easeOut});var i=$("#module-columns-holder div:first",b).attr("class");i=$("."+i);var j="#3f3f3f",k=rgb2hex(i.css("background-color")),l=rgb2hex($(".thumb-tag h1",i).css("color")),m=rgb2hex($(".thumb-tag h2",i).css("color"));0==touchDevice&&(i.unbind("mouseenter mouseleave"),i.hover(function(a){customHoverAnimation("over",a,$(this),$("#thumb-image-hover",this));var b=$(".thumb-tag h1",this),c=$(".thumb-tag h2",this);TweenMax.to([b,c],.6,{css:{color:k},ease:Quad.easeOut}),TweenMax.to($(this),.6,{css:{backgroundColor:j},ease:Quad.easeOut})},function(a){customHoverAnimation("out",a,$(this),$("#thumb-image-hover",this));var b=$(".thumb-tag h1",this),c=$(".thumb-tag h2",this);TweenMax.to(b,.6,{css:{color:l},ease:Circ.easeOut}),TweenMax.to(c,.6,{css:{color:m},ease:Circ.easeOut}),TweenMax.to($(this),.6,{css:{backgroundColor:k},ease:Quad.easeOut})})),columnsPrevItemMediaArr=[];var n=$("#module-columns-preview-holder",g).width();g.css("display","inline"),$(g,b).find(".columns-preview-horizontal-fix").each(function(){$(this).css("width",9999999);var a=$("ul",this),b=$("ul li",this),c=0;b.each(function(){var a=$(".columns-preview-media",this),b=a.attr("data-src"),d=a.children().length>0&&"slides"!=b?$("#video-wrapper",a):"null";columnsPrevItemArr[c]=$(this),columnsPrevItemMediaArr[c]="null"==d?o(a,b):d,c++,$(this).css("width",n),$(this).css("display","none")}),$("#columns-slides-controls",this).length>0&&(tempSlidesControl=$("#columns-slides-controls",this),colSlidesControl=$("#columns-slides-controls",this),colSlidesControl.remove()),$(this).css("width",n),a.css("width",a.width())}),sCurrIdx=0;var s=0,t=0;g.css("display","none");var w=0;totalColPreviews=$(".columns-preview-horizontal-fix ul",b).children().length,i.unbind("click"),i.click(function(){var a=$(i).index(this);columnsPreviewIndex=a,null!=moduleList&&(moduleList.disableList(),w=moduleList.currentPosition(),TweenMax.to($(t_scrBarV2),.3,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:function(){$(t_scrBarV2).css("display","none")}})),1==touchDevice&&(w=f.scrollTop()),TweenMax.to(f,.4,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:function(){f.css("display","none")}});var b=0;for(b;totalColPreviews>b;b++)b==columnsPreviewIndex?columnsPrevItemArr[b].css("display","inline"):columnsPrevItemArr[b].css("display","none");$(".columns-preview-counter span","#columns-preview-controls").empty().append(a+1+"/"+totalColPreviews),x(a)}),A(!0);var D=rgb2hex($(".columns-preview-backward .columns-preview-backg").css("background-color"));$(".columns-preview-backward, .columns-preview-forward, .columns-preview-close").unbind("mouseenter mouseleave"),$(".columns-preview-backward, .columns-preview-forward, .columns-preview-close").hover(function(){TweenMax.to($(".columns-preview-backg",this),.3,{css:{backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".columns-preview-backg",this),.3,{css:{backgroundColor:D},easing:Sine.easeOut})}),$(".columns-preview-backward, .columns-preview-forward",b).click(function(){var a=columnsPreviewIndex;1==$(this).hasClass("columns-preview-backward")?(a--,E(a)):1==$(this).hasClass("columns-preview-forward")&&(a++,E(a))}),$(".columns-preview-horizontal-fix ul").wipetouch({tapToClick:!1,preventDefault:!1,wipeLeft:function(){var b=columnsPreviewIndex;b++,E(b)},wipeRight:function(){var b=columnsPreviewIndex;b--,E(b)}});var F=$("#module-columns-holder",b);$originalDataPos=getOriginalPos(F),0==touchDevice&&$("#filter-buttons-holder .filter-button",b).hover(function(){1!=$(this).hasClass("selected")&&TweenMax.to($(this),.3,{css:{color:"#ffffff",backgroundColor:themeColor},ease:Sine.easeOut})},function(){1!=$(this).hasClass("selected")&&TweenMax.to($(this),.3,{css:{color:"#3f3f3f",backgroundColor:"transparent"},ease:Sine.easeOut})}),$("#filter-buttons-holder .filter-button",b).click(function(){if(1!=$(this).hasClass("selected")){var a=$(this).attr("data-filter");return $("#filter-buttons-holder",b).find(".filter-button").each(function(){1==$(this).hasClass("selected")&&($(this).removeClass("selected"),TweenMax.to($(this),.3,{css:{color:"#3f3f3f",backgroundColor:"transparent"},ease:Sine.easeOut}))}),$(this).addClass("selected"),1==touchDevice&&TweenMax.to($(this),.3,{css:{color:"#ffffff",backgroundColor:themeColor},ease:Sine.easeOut}),filterContent(F,a,$originalDataPos,onFilterComplete),!1}})}}function updateResizeSlides(){var a=columnsPrevItemMediaArr[columnsPreviewIndex];a[sCurrIdx].css("z-index",2).attr("id","col-prev-media-slide-curr");var b=a[sCurrIdx],c=a[sCurrIdx].parent(),d=c.height(),e=b.height();d!=e&&c.css("height",e)}function insertVideo(a,b,c){var d=a;1==touchDevice&&d.children().length>0&&(tempVid=$("div:first",d),tempVid.attr("data-width",b.width()),b.empty(),b.append(tempVid)),(void 0==c||null==c)&&(c=function(){}),d=$("#video-wrapper",b),d.length>0&&(d.empty(),d.attr("data-active-video","true"),TweenMax.to(b,.5,{css:{height:d.attr("data-height")+"px"},easing:Sine.easeOut,onComplete:c}),templateAddMediaVideo(d.attr("data-video-type"),d,void 0))}function checkActiveVideo(a){var b=$("#video-wrapper",a);if(b.length>0)var c=setInterval(function(){var a=$("iframe",b);a.length>0?$("iframe",b).attr("src",""):b.empty(),clearCustomInterval(c)},40)}function onFilterComplete(a,b,c,d){var e=b.children().length-1;if(0==d&&(containerTotalH=c.position().top+parseInt(c.css("margin-bottom"),10)+c.height()),a==e){var f=$(txt_modCont),g=$("#module-columns",f),h=$("#module-columns-wrapper",g);if(g.length<=0)return;b.css("height",containerTotalH),TweenMax.to($("div:first",h),.3,{css:{top:"0px"},easing:Sine.easeOut,onComplete:function(){$("#template-menu").attr("data-side"),moduleUpdate(f,h,$("div:first",h),sideType,null,null,0),null!=moduleList&&moduleList.enableList()}})}}function getOriginalPos(a){var b=0,c=new Array;return a.children().each(function(){c[b]={x:$(this).position().left,y:$(this).position().top},b++}),a.css("height",a.height()),a.css("width",a.width()),b=0,a.children().each(function(){$(this).css("position","absolute"),$(this).css("left",c[b].x),$(this).css("top",c[b].y),b++}),c}function filterContent(a,b,c,d){var e=0,f=0;0==e&&null!=moduleList&&moduleList.disableList(),a.children().each(function(){if(-1==checkSelector($(this).attr("data-id"),b)&&"*"!=b)TweenMax.to($(this),.6,{css:{opacity:"0",left:c[f].x,top:c[f].y},easing:Sine.easeOut,onComplete:d,onCompleteParams:[e,a,$(this),!0]});else{var g=c[f].x,h=c[f].y;TweenMax.to($(this),.6,{css:{opacity:"1",left:g,top:h},easing:Sine.easeOut,onComplete:d,onCompleteParams:[e,a,$(this),!1]}),f++}e++})}function checkSelector(b,c){var d=-1,e=b+"",f=e.split(" ");for(a in f)f[a]==c&&(d=0);return d}function getDirectionCSS(a,b){var h,i,c=a.width(),d=a.height(),e=(b.x-a.offset().left-c/2)*(c>d?d/c:1),f=(b.y-a.offset().top-d/2)*(d>c?c/d:1),g=Math.round((Math.atan2(f,e)*(180/Math.PI)+180)/90+3)%4;switch(g){case 0:h={instance:"hover-slideFromTop",val1:"0px",val2:"-100%"},i={instance:"hover-slideTopLeft",val1:"0px",val2:"0px"};break;case 1:h={instance:"hover-slideFromRight",val1:"100%",val2:"0px"},i={instance:"hover-slideTopLeft",val1:"0px",val2:"0px"};break;case 2:h={instance:"hover-slideFromBottom",val1:"0px",val2:"100%"},i={instance:"hover-slideTopLeft",val1:"0px",val2:"0px"};break;case 3:h={instance:"hover-slideFromLeft",val1:"-100%",val2:"0px"},i={instance:"hover-slideTopLeft",val1:"0px",val2:"0px"}}return{from:h,to:i}}function animateThumb(a){TweenMax.to(a,.4,{css:{opacity:"1"},easing:Sine.easeOut})}function checkColumnSize(a){var b=$(txt_modCont),c=$("#module-columns",b);b.attr("data-id");var e=$("#module-columns-holder",c),f=parseInt($("div:first",e).css("margin-right"),10),g=parseInt($("div:first",e).css("margin-bottom"),10),h=$("div:first",e).width(),i=$("div:first",e).attr("class"),j=$("div:first",e).height(),k=$("#module-container").width(),l=Math.round(k/(h+f));if(!(c.length<=0)){"fourth-thumb-holder"==i&&(maxColumns=4),"third-thumb-holder"==i&&(maxColumns=3),"half-thumb-holder"==i&&(maxColumns=2),l>1?c.width():e.width(),l>maxColumns&&(l=maxColumns),initialColumns=l;var n=$(".columns-preview-media"),o=$(".columns-preview-description"),p=l*(h+f)-f,q=p+parseInt($("#module-columns-container").css("margin-left"),10)+parseInt($("#module-columns-container").css("margin-right"),10);if(q>k?l>1?l--:initialColumns--:k>=q&&initialColumns--,void 0!=a&&1==a){var p=l*(h+f)-f,q=p+parseInt($("#module-columns-container").css("margin-left"),10)+parseInt($("#module-columns-container").css("margin-right"),10);$("#module-columns-preview-holder",c).css("width",p+"px"),768>p?(n.css("width",p+"px"),o.css("margin-left","0px").css("width","100%")):(n.css("width",""),o.css("margin-left","").css("width",""));var r=p;0==columnsPreviewOpen&&$("#module-columns-preview",c).css("display","inline"),$(c).find(".columns-preview-horizontal-fix").each(function(){var a=$("ul",this),b=$("ul li",this);$(this).css("width",9999999),b.each(function(){$(this).css("width",r)});var c=a.width();b.each(function(){0==columnsPreviewOpen&&$(this).css("display","none")}),$(this).css("width",r),a.css("width",c)});var s=$("#module-columns-preview-holder").width(),t=parseInt($("li:first",".columns-preview-horizontal-fix ul").css("margin-right"),10);$(".columns-preview-horizontal-fix ul").css("left",-(columnsPreviewIndex*(s+t)))}if(initialColumns!=l){var u=0,v=0,w=0,x=0,y=e.children().length;e.children().each(function(){if(l>v){var a=u*(j+g),b=v*(h+f);$(this).css("position","absolute").css("left",b+"px").css("top",a+"px"),v++}else{v=0,u++;var a=u*(j+g),b=v*(j+f);$(this).css("position","absolute").css("left",b+"px").css("top",a+"px"),v++}$(this).css("opacity","1"),x==y-1&&(w=parseInt($(this).css("top"),10)+$(this).height()),x++}),$originalDataPos=getOriginalPos(e);var p=l*(h+f)-f,q=p+parseInt($("#module-columns-container").css("margin-left"),10)+parseInt($("#module-columns-container").css("margin-right"),10);$("#module-columns").css("width",q+"px"),$("#module-columns-container").css("width",p+"px"),e.css("height",w+"px"),e.css("width",p+"px"),$("#module-columns-preview-holder",c).css("width",p+"px"),768>p?(n.css("width",p+"px"),o.css("margin-left","0px").css("width","100%")):(n.css("width",""),o.css("margin-left","").css("width",""))}var z=$("#module-columns-preview-wrapper",b),r=$("#module-columns-preview-holder",z).width();0==columnsPreviewOpen&&z.css("display","inline"),$(z,c).find(".columns-preview-horizontal-fix").each(function(){$(this).css("width",9999999);var a=$("ul",this),b=$("ul li",this);b.each(function(){$(this).css("width",r)}),a.css("width",a.width()),$(this).css("width",r),b.each(function(){0==columnsPreviewOpen&&$(this).css("display","none")})}),0==columnsPreviewOpen&&z.css("display","none")}}function colPreviewItemDisplay(a){var b=0;for(b;totalColPreviews>b;b++)columnsPrevItemArr[b].css("display",a)}function animateColPreviewMedia(a){var b=$(a),c=$(a).parent();0==touchDevice?TweenMax.to($(a).parent(),.3,{css:{height:b.height()},easing:Sine.easeOut}):c.css("height",b.height()),previewAnimDone=!0,""!=colSlidesControl&&TweenMax.to(colSlidesControl,.5,{css:{opacity:"1"},easing:Sine.easeOut,delay:.5}),TweenMax.to(b,.5,{css:{opacity:"1"},easing:Sine.easeOut,delay:.1,onComplete:colPrevMediaOnComplete,onCompleteParams:[c]})}function colPrevMediaOnComplete(a){a.length>0&&a.css("height",""),""!=colSlidesControl&&updateResizeSlides(),moduleUpdate_page_columns()}function moduleGallery(){var a=$(txt_modCont),b=$("#module-galleries",a);if(!(b.length<=0)){a.width(),a.height();var e=$("#module-galleries-holder",b),f=parseInt($(".thumb-holder").css("margin-right"),10),g=parseInt($(".thumb-holder").css("margin-bottom"),10),h=$(".thumb-holder").width(),i=$(".thumb-holder").height(),j=e.width();e.height();var l=b.height(),m=Math.round(j/(h+f)),n=Math.floor(l/(i+g)+1),o=m*n-1,p=$(window).height()+50,q=$(window).width();if(visibleGalleryH=l,galleryColumns=m,galleryLines=n,galleryItemArr=[],galleryTopPos=0,setPreview(),storePreviewMedia(),addControlsListeners(),480>q&&galleryColumns>2&&(galleryColumns=1),1==touchDevice&&320>=q&&1==galleryColumns){var r=getAvailableScrollbar();b.css("width",h+f+.5*r.width());var s=$(txt_modCont),t=Math.round(.5*(q-$(":first",s).width()));s.css("left",t)}$(".thumb-holder:nth-child("+galleryColumns+"n+"+galleryColumns+")",e).css("margin-right","0px"),moduleUpdate(a,b,$("div:first",b),sideType),a.css("visibility","visible");var u=$("#module-galleries-holder .thumb-holder",b),v="#3f3f3f",w=rgb2hex(u.css("background-color")),x=rgb2hex($(".thumb-tag p",u).css("color"));0==touchDevice&&u.hover(function(a){customHoverAnimation("over",a,$(this),$("#thumb-image-hover",this));var b=$(".thumb-tag p",this);TweenMax.to(b,.6,{css:{color:w},ease:Quad.easeOut}),TweenMax.to($(this),.6,{css:{backgroundColor:v},ease:Quad.easeOut})},function(a){customHoverAnimation("out",a,$(this),$("#thumb-image-hover",this));var b=$(".thumb-tag p",this);TweenMax.to(b,.6,{css:{color:x},ease:Circ.easeOut}),TweenMax.to($(this),.6,{css:{backgroundColor:w},ease:Quad.easeOut})}),u.click(function(){var a=$(".thumb-holder").index(this);return"link"==galleryPreviewMediaArr[a]?(window.open(galleryLink[a].url,galleryLink[a].target),void 0):(currGalleryThumbID=a,currPreviewElem=galleryPreviewMediaArr[a],setPreviewLoadHTML(),galleryTopPos=parseInt($("div:first",b).css("top"),10),TweenMax.to(b,.6,{css:{opacity:"0"},ease:Circ.easeOut,onComplete:showGalleryPreview}),null!=moduleList&&moduleList.disableList(),void 0)});var y=e.children().length-1;o=o>y?y:o,galleryVisibleThumbs=o+1;var z=0,A=0,B=0;e.find(".thumb-holder").each(function(){z>o?$(this).css("display","none"):$(this).css("top",p+"px"),galleryItemArr[z]=$(this),z++}),z=0;var A=0,B=0;e.find(".thumb-holder").each(function(){if(o>=z){A=Math.floor(z/m),B=.15*(z-A*m),A=.1*A;var a=.1+B+A;z==o?TweenMax.to($(this),.6,{css:{top:"0px"},delay:a,ease:Circ.easeOut,onComplete:afterGalleryStartupAnimation,onCompleteParams:[l]}):TweenMax.to($(this),.6,{css:{top:"0px"},delay:a,ease:Circ.easeOut}),z++}}),endModuleFunction=endModuleGallery,moduleEnd=!0}}function getAvailableScrollbar(){var a=$("#module-container #module-scrollbar-holder"),b=$("#module-container #module-scrollbar-holder_v2"),c=a.length>0?a:b;return c}function endModuleGallery(a){var b=$(txt_modCont),c=$("#module-galleries",b),d=$("#module-galleries-holder",c),e=$(".thumb-holder",c),f=e.height()+parseInt(e.css("margin-bottom"),10),g=parseInt(d.css("top"),10),h=Math.floor(Math.abs(g/f)),i=h*galleryColumns,j=i+galleryVisibleThumbs,k=$(window).height()+50,l=galleryColumns*galleryLines-1,m=d.children().length-1,n=d.height(),o=0,p=galleryItemArr.length;if(1==a)for(l=l>m?m:l;p--;)p>=l?galleryItemArr[p].css("display","none"):galleryItemArr[p].css("top",k+"px");else for(p=galleryItemArr.length;p--;)(i>p||p>=j)&&galleryItemArr[p].css("display","none");n>$(window).height()&&d.css("top","0px"),o=0;var r=0,s=0,t=!0;if(1==a)moduleEnd=!0,d.find(".thumb-holder").each(function(){if(l>=o){r=Math.floor(o/galleryColumns),s=.15*(o-r*galleryColumns),r=.1*r;var a=.1+s+r;TweenMax.killTweensOf($(this)),o==l?TweenMax.to($(this),.6,{css:{top:"0px"},delay:a,ease:Circ.easeOut,onComplete:showOtherThumbs,onCompleteParams:[d]}):TweenMax.to($(this),.6,{css:{top:"0px"},delay:a,ease:Circ.easeOut}),o++}});else for(p=galleryItemArr.length,o=0;p--;)if(p>=i){r=Math.floor(o/galleryColumns),s=.15*(o-r*galleryColumns),r=.1*r;var u=.1+s+r;p==i&&1==a?TweenMax.to(galleryItemArr[p],.8,{css:{top:k+"px"},delay:u,ease:Circ.easeInOut,onComplete:showOtherThumbs,onCompleteParams:[d]}):TweenMax.to(galleryItemArr[p],.8,{css:{top:k+"px"},delay:u,ease:Circ.easeInOut}),1==t&&$("#dragger-holder").length>0&&(t=!1,TweenMax.to($("#dragger-holder"),.8,{css:{top:k+"px"},ease:Circ.easeInOut})),o++}void 0==a&&(endModuleFunction=null)}function showOtherThumbs(a){a.find(".thumb-holder").each(function(){$(this).css("display","inline").css("top","0px")})}function afterGalleryStartupAnimation(){var b=$(txt_modCont),c=$("#module-galleries",b);c.length<=0||($("#module-galleries-holder",c).find(".thumb-holder").each(function(){$(this).css("display","inline")}),$("#module-galleries-preview").wipetouch({tapToClick:!1,preventDefault:!1,wipeLeft:function(){wipeChange(1)},wipeRight:function(){wipeChange(-1)}}))}function wipeChange(a){var b=$("#preview-media-holder :first");TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"1"},delay:.3,easing:Sine.easeOut}),TweenMax.to(b,.4,{css:{opacity:"0"},easing:Sine.easeOut,onComplete:function(){changePreviewMedia(a)}})}function storePreviewMedia(){galleryPreviewMediaArr=new Array,galleryPreviewDescArr=new Array,galleryLink=[];var a=0;$("#module-galleries-preview").find("#preview-media-holder").children().each(function(){"preview-media-image"==$(this).attr("id")?galleryPreviewMediaArr[a]='<img id="preview-media-image" src="'+$(this).attr("data-url")+'" title="'+$(this).attr("data-title")+'"'+' alt="'+$(this).attr("data-alt")+'" />':"video-wrapper"==$(this).attr("id")?($(this).attr("data-type"),galleryPreviewMediaArr[a]=$(this)):"link"==$(this).attr("id")&&(galleryPreviewMediaArr[a]="link",galleryLink[a]={url:$(this).attr("data-url"),target:$(this).attr("data-target")});var c=$(":first",this);galleryPreviewDescArr[a]=$(":first",this).length>0?c:void 0,a++}),a=0;var b=galleryPreviewDescArr.length,c=$("#module-galleries-preview-description-holder");for(a=0;b>a;a++)c.length>0&&void 0!=galleryPreviewDescArr[a]&&c.append(galleryPreviewDescArr[a]);setPreviewLoadHTML()}function isIE9Std(){var a;try{arguments.caller.length,a=0}catch(c){a=1}return 1==(document.all&&a)}function setPreviewLoadHTML(){$("#module-galleries-preview").find("#preview-media-holder").empty()}function setPreview(){var a=$("#module-galleries-preview");a.length>0&&(a.remove(),$("#template-wrapper").after(a))}function showGalleryPreview(){previewGalleryOpen=!0;
var a=$("#module-galleries-preview");$("#module-galleries").attr("style","display: none; visibility: visible;"),a.css("opacity","0"),a.css("display","inline"),a.css("visibility","visible"),changeGalleryPreviewDescription(-1,currGalleryThumbID),TweenMax.to(a,.6,{css:{opacity:"1"},ease:Circ.easeOut,onComplete:showGalleryPreviewMedia}),TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"1"},delay:.3,easing:Sine.easeOut})}function showGalleryPreviewMedia(){if("preview-media-image"==$(currPreviewElem).attr("id")){audioPlayerPlay(),$("#module-galleries-preview").find("#preview-media-holder").append('<img id="preview-media-load" onload="animatePreviewMedia()" title="" alt="" />');var a=$("#preview-media-load");a.attr("style","visibility: visible; display: inline"),a.css("opacity","0"),a.attr("src",$(currPreviewElem).attr("src")).attr("title",$(currPreviewElem).attr("title")).attr("alt",$(currPreviewElem).attr("alt"))}else if("video-wrapper"==$(currPreviewElem).attr("id")){audioPlayerPause(),$("#module-galleries-preview").find("#preview-media-holder").find("#video-wrapper").remove();var b=$("#module-galleries-preview-description-holder").length>0?$("#module-galleries-preview-description-holder").height():0;0==previewDescriptionActive&&(b=0);var c=$("#preview-media-holder"),d=parseInt($(currPreviewElem).attr("data-width"),10)+2*previewBorderSize,e=parseInt($(currPreviewElem).attr("data-height"),10)+2*previewBorderSize,f=.5*-e-.5*b,g=.5*-d;c.attr("style","width: "+d+"px; height: "+e+"px; margin: 0px; top: 50%; left: 50%; margin-top:"+f+"px; margin-left:"+g+"px;"),$("#preview-media-holder").append('<div id="video-wrapper"></div>'),templateAddMediaVideo($(currPreviewElem).attr("data-video-type"),$(currPreviewElem),$("#video-wrapper")),TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"0"},easing:Sine.easeOut}),loadingAnimationDone=!0,fadeInMedia("")}}function addControlsListeners(){if(0==touchDevice){var a=$(".module-galleries-preview-arrow-backward .module-galleries-preview-arrow-backg").css("opacity"),b=rgb2hex($(".module-galleries-preview-arrow-backward .module-galleries-preview-arrow-backg").css("background-color")),c=$(".module-galleries-preview-arrow-backward, .module-galleries-preview-arrow-forward, .module-galleries-preview-arrow-close");c.unbind("mouseenter mouseleave"),c.hover(function(){TweenMax.to($(".module-galleries-preview-arrow-backg",this),.3,{css:{opacity:"1",backgroundColor:themeColor},easing:Sine.easeOut})},function(){TweenMax.to($(".module-galleries-preview-arrow-backg",this),.3,{css:{opacity:a,backgroundColor:b},easing:Sine.easeOut})})}var d=$(".module-galleries-preview-arrow-backward"),e=$(".module-galleries-preview-arrow-forward");d.unbind("click"),d.click(function(){TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"1"},easing:Sine.easeOut}),changePreviewMedia(-1)}),e.unbind("click"),e.click(function(){TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"1"},easing:Sine.easeOut}),changePreviewMedia(1)});var f=".module-galleries-preview-arrow-close",g="#module-galleries-preview-background";$(g).unbind("click"),$(f).unbind("click"),$(f+","+g).click(function(){firstDescRun=!0,"preview-media-image"==$(currPreviewElem).attr("id")?TweenMax.to($("#preview-media-load"),.3,{css:{opacity:"0"},ease:Circ.easeOut}):"video-wrapper"==$(currPreviewElem).attr("id")&&(setPreviewLoadHTML(),TweenMax.to($(currPreviewElem),.3,{css:{opacity:"0"},ease:Circ.easeOut})),1==previewDescriptionActive&&TweenMax.to($("#module-galleries-preview-description-holder"),.3,{css:{bottom:"-60px"},ease:Circ.easeOut}),TweenMax.to($("#module-galleries-preview"),.6,{css:{opacity:"0"},ease:Circ.easeOut,delay:.3,onComplete:onClosePreviewComplete})})}function changePreviewMedia(a){var b=currGalleryThumbID+a;return b>galleryPreviewMediaArr.length-1?b=0:0>b&&(b=galleryPreviewMediaArr.length-1),"link"==galleryPreviewMediaArr[b]?(changeGalleryPreviewDescription(currGalleryThumbID),currGalleryThumbID=b,changePreviewMedia(a),void 0):(currGalleryThumbID!=b&&("preview-media-image"==$(currPreviewElem).attr("id")?$("#preview-media-load").css("opacity",0).css("visibility","hidden").css("display","none"):"video-wrapper"==$(currPreviewElem).attr("id")&&$(currPreviewElem).css("opacity","0").css("visibility","hidden").css("display","none"),changeGalleryPreviewDescription(currGalleryThumbID,b),currGalleryThumbID=b,currPreviewElem=galleryPreviewMediaArr[currGalleryThumbID],setPreviewLoadHTML(),showGalleryPreviewMedia()),void 0)}function changeGalleryPreviewDescription(a,b){if(-1!=a){var c=galleryPreviewDescArr[a];void 0!=c&&TweenMax.to($(c),.4,{css:{opacity:"0"},ease:Circ.easeOut,onComplete:hidePrevDescText,onCompleteParams:[a]})}if(-1!=b){var d=galleryPreviewDescArr[b];if(void 0==d)return previewDescriptionActive=!1,firstDescRun=!0,TweenMax.to($("#module-galleries-preview-description-holder"),.4,{css:{bottom:"-60px"},ease:Circ.easeOut}),void 0;previewDescriptionActive=!0,$(d).css("opacity","0").css("visibility","visible").css("display","inline"),TweenMax.to($(d),.6,{css:{opacity:"1"},ease:Circ.easeOut})}}function hidePrevDescText(a){var b=galleryPreviewDescArr[a];$(b).css("opacity","0").css("visibility","hidden").css("display","none")}function updatePreviewMediaPosition(){var a=$(window).width()-2*previewBorderSize,b=$(window).height()-36,c="",d=$(currPreviewElem).attr("id");if("preview-media-image"==d&&(c=$("#preview-media-load"),c.css("width","").css("height",""),checkSizeMedia($(c),a,b)),null!=$(c).width()){var e=$(c).width()+2*previewBorderSize,f=$(c).height()+2*previewBorderSize,g=.5*-f-18,h=.5*-e,i=$("#preview-media-holder");i.attr("style","width: "+$(c).width()+"px; height: "+$(c).height()+"px; margin: 0px; top: 50%; left: 50%; margin-top:"+g+"px; margin-left:"+h+"px;")}}function onClosePreviewComplete(){audioPlayerPlay(),setPreviewLoadHTML();var a=$("#preview-media-load"),b=$("#module-galleries-preview"),c=$("#module-galleries");"preview-media-image"==$(currPreviewElem).attr("id")&&a.css("opacity",0).css("visibility","hidden").css("display","none"),"preview-media-video"==$(currPreviewElem).attr("id")&&a.css("opacity",0),b.css("opacity","0").css("display","none").css("visibility","hidden"),c.css("opacity","0").css("display","inline").css("visibility","visible"),previewGalleryOpen=!1,changeGalleryPreviewDescription(currGalleryThumbID,-1);var d=$(txt_modCont),e=$("#module-galleries",d);null!=moduleList&&(moduleList.enableList(),moduleList.updateCurrPos(galleryTopPos));var f=parseInt($(".thumb-holder").css("margin-right"),10),g=$(".thumb-holder").width(),h=$(window).width();if(1==touchDevice&&320>=h&&1==galleryColumns){var i=getAvailableScrollbar();e.css("width",g+f+.5*i.width());var j=$(txt_modCont),k=Math.round(.5*(h-$(":first",j).width()));j.css("left",k)}moduleUpdate(d,e,$("div:first",e),sideType,!0,!1),TweenMax.to(e,.6,{css:{opacity:"1"},ease:Circ.easeOut})}function animatePreviewMedia(){var a=$("#module-galleries-preview-description-holder").length>0?$("#module-galleries-preview-description-holder").height():0;0==previewDescriptionActive&&(a=0);var b=$(window).width()-2*previewBorderSize,c=$(window).height()-a,d="",e=$(currPreviewElem).attr("id");if("preview-media-image"==e&&(d=$("#preview-media-load"),checkSizeMedia($(d),b,c)),null!=$(d).width()){var f=$(d).width()+2*previewBorderSize,g=$(d).height()+2*previewBorderSize,h=.5*-g-.5*a,i=.5*-f,j=$("#preview-media-holder");j.attr("style","width: "+$(d).width()+"px; height: "+$(d).height()+"px; margin: 0px; top: 50%; left: 50%; margin-top:"+h+"px; margin-left:"+i+"px;"),TweenMax.to($(".gallery-preview-media-loader"),.3,{css:{opacity:"0"},easing:Sine.easeOut}),loadingAnimationDone=!0,fadeInMedia(e)}}function fadeInMedia(a){"preview-media-image"==a&&TweenMax.to($("#preview-media-load"),.6,{css:{opacity:"1"},ease:Circ.easeOut}),1==firstDescRun&&1==previewDescriptionActive&&(firstDescRun=!1,TweenMax.to($("#module-galleries-preview-description-holder"),.6,{css:{bottom:"0px"},delay:.5,ease:Circ.easeOut}))}function checkSizeMedia(a,b,c){var g,h,d=a.width(),e=a.height();d>b&&e>c?(g=b,h=e/d*g,h>c&&(g=d/e*c,h=c)):d>b&&c>e?(g=b,h=e/d*g):b>d&&e>c?(h=c,g=h/e*d):b>d&&c>e&&(g=d,h=e),a.width(g),a.height(h)}function gallerySizeMedia(a,b,c){var d=a.width(),e=a.height(),f=1;f=d/e>b/c?c/e:b/d;var g=d*f,h=e*f;a.width(g),a.height(h)}function setupAudio(){function x(a){if(w!=a){w=a;var b=$("span",h);b.css("width",""),b.empty().append(a),b.width()<=h.width()&&b.css("width","100%")}}function y(){myPlaylist=new jPlayerPlaylist({jPlayer:"#audio-items"},s,{playlistOptions:{loopOnPrevious:!0,enableRemoveControls:!1},volume:volumeValue,loop:!0,muted:!1,swfPath:"js/audio-js/",supplied:"oga, mp3, wav",wmode:"window"}),b.bind($.jPlayer.event.play,function(a){x(a.jPlayer.status.media.title)})}function A(){C(i),C(j),C(l),C(m)}function B(){i.unbind("mouseenter mouseleave"),j.unbind("mouseenter mouseleave"),l.unbind("mouseenter mouseleave"),m.unbind("mouseenter mouseleave")}function C(a){var b=$(".audio-controls-backg",a),c=rgb2hex(b.css("background-color"));a.hover(function(){D(!0),TweenMax.to(b,.3,{css:{backgroundColor:themeColor},ease:Sine.easeOut})},function(){D(!1),TweenMax.to(b,.3,{css:{backgroundColor:c},ease:Sine.easeOut})})}function D(a){r.length<=0||(1==a?(r.css("display","inline"),TweenMax.killTweensOf(r),TweenMax.to(r,.4,{css:{opacity:"1"},ease:Sine.easeOut})):TweenMax.to(r,.4,{css:{opacity:"0"},ease:Sine.easeOut,onComplete:function(){r.css("opacity","0").css("display","none")}}))}function E(){0==initializePlayer&&(initializePlayer=!0,y())}var a=$("#audio-player"),b=$("#audio-items");if(1==touchDevice)return a.remove(),void 0;if(b.length<=0||b.children().length<=0)return a.length>0&&a.remove(),void 0;audioAutoPlay=void 0!=a.attr("data-auto-play")&&"true"==a.attr("data-auto-play")?!0:!1,audioPlayerOpened=void 0!=a.attr("data-player-opened")&&"true"==a.attr("data-player-opened")?!0:!1,volumeValue=void 0!=a.attr("data-player-volume")?Number(a.attr("data-player-volume")):.5,tempVolume=volumeValue,audioPlayerInst=$("#audio-items"),a.css("width",$(".template-menu").width());var i,j,l,m,n,o,p,q,r,c=$("#audio-options-button"),d=a.width(),e=d-c.width(),f=$("#audio-player-holder"),g=audioPlayerOpened,h=$(".audio-player-tooltip-title","#audio-tooltip-holder");r=$("#audio-player-tooltip","#audio-player"),i=$("#audio-prev-track","#audio-player-holder"),j=$("#audio-play-pause-track","#audio-player-holder"),l=$("#audio-next-track","#audio-player-holder"),m=$("#audio-volume-speaker","#audio-player-holder"),n=$("#audio-volume-bar"),o=$(".audio-volume-bar-scrub-current",n),q=$(".audio-volume-bar-scrub-backg",n).width(),o.css("width",volumeValue*q),p=o.width(),1==audioPlayerOpened?(f.css("left","0px"),A()):(f.css("left",e),B()),c.click(function(){0==g?(g=!0,TweenMax.to(f,.4,{css:{left:"0px"},ease:Sine.easeOut,onComplete:function(){A()}})):(g=!1,B(),TweenMax.to(f,.4,{css:{left:e+"px"},ease:Sine.easeOut}))});var s=new Array;new Array;var u=0,v=0;b.find("#audio-track").each(function(){s[v]={title:$(this).attr("data-title"),mp3:$(this).attr("data-src")+".mp3",oga:$(this).attr("data-src")+".ogg",wav:$(this).attr("data-src")+".wav"},v++});var w="";b.empty(),playSign=$(".audio-play-track-sign",j),pauseSign=$(".audio-pause-track-sign",j),volOnSign=$(".audio-volume-on-sign",m),volOffSign=$(".audio-volume-off-sign",m),0==audioAutoPlay?(playSign.css("opacity","1"),pauseSign.css("opacity","0"),x(s[u].title)):(isPlaying=!0,isAudioPlaying=!0,0==initializePlayer&&(initializePlayer=!0,y(),firstPlay=!1),myPlaylist.play(u),x(s[u].title),playSign.css("opacity","0"),pauseSign.css("opacity","1")),0==audioMuteOn?(1==initializePlayer&&myPlaylist.option("muted",!1),volOnSign.css("opacity","1"),volOffSign.css("opacity","0")):(1==initializePlayer&&myPlaylist.option("muted",!0),volOnSign.css("opacity","0"),volOffSign.css("opacity","1")),i.click(function(){E(),isPlaying=!0,isAudioPlaying=!0,playSign.css("opacity","0"),pauseSign.css("opacity","1"),myPlaylist.previous()}),l.click(function(){E(),isPlaying=!0,isAudioPlaying=!0,playSign.css("opacity","0"),pauseSign.css("opacity","1"),myPlaylist.next()}),j.click(function(){E(),1==isPlaying?(isPlaying=!1,isAudioPlaying=!1,myPlaylist.pause(),playSign.css("opacity","1"),pauseSign.css("opacity","0")):(isPlaying=!0,isAudioPlaying=!0,0==firstPlay?(b.jPlayer("option","volume",tempVolume),myPlaylist.play()):(firstPlay=!0,myPlaylist.play(u)),playSign.css("opacity","0"),pauseSign.css("opacity","1"))}),n.click(function(a){0!=initializePlayer&&(p=a.pageX-$(this).offset().left,p=.1*Math.round(10*(p/q)),b.jPlayer("option","volume",p),1==audioMuteOn&&p>0&&(audioMuteOn=!1,b.jPlayer("option","muted",audioMuteOn),tempVolume=audioMuteOn,volOnSign.css("opacity","1"),volOffSign.css("opacity","0")),p=q*p,p>q&&(p=q),TweenMax.to(o,.2,{css:{width:p},ease:Sine.easeOut}))}),m.click(function(){0!=initializePlayer&&(1==audioMuteOn?(audioMuteOn=!1,TweenMax.to(o,.3,{css:{width:p},ease:Sine.easeOut}),volOnSign.css("opacity","1"),volOffSign.css("opacity","0")):(audioMuteOn=!0,TweenMax.to(o,.3,{css:{width:"0px"},ease:Sine.easeOut}),volOnSign.css("opacity","0"),volOffSign.css("opacity","1")),b.jPlayer("option","muted",audioMuteOn))})}function audioPlayerPlay(){if(0!=initializePlayer&&void 0!=audioPlayerInst&&audioPlayerInst.length>0&&1==isAudioPlaying&&0==isPlaying){var a=tempVolume;audioPlayerInst.jPlayer("option","volume","0"),isPlaying=!0,isAudioPlaying=!0,playSign.css("opacity","0"),pauseSign.css("opacity","1"),setTimeout(function(){audioPlayerInst.jPlayer("play")},100);var c=setInterval(function(){audioPlayerInst.jPlayer("option","volume",a),clearInterval(c)},600)}}function audioPlayerPause(){0!=initializePlayer&&void 0!=audioPlayerInst&&audioPlayerInst.length>0&&(tempVolume=audioPlayerInst.jPlayer("option","volume"),audioPlayerInst.jPlayer("option","volume","0"),isPlaying=!1,playSign.css("opacity","1"),pauseSign.css("opacity","0"),setTimeout(function(){1==isPlaying&&myPlaylist.pause()},100))}function footerListeners(){$("#footer-social").find("#footer-social-holder").find("a").each(function(){var a=$("img",this).attr("title");$(this).hover(function(){$("#footer-social-tooltip").css("opacity","0"),$("#footer-social-tooltip").css("display","inline"),$("#footer-social-tooltip").css("visibility","visible"),$("#footer-social-tooltip").empty(),$("#footer-social-tooltip").append("<span>"+a+"</span>"),TweenMax.to($("#footer-social-tooltip"),.6,{css:{opacity:"1"},ease:Circ.easeOut})},function(){$("#footer-social-tooltip").css("opacity","0"),$("#footer-social-tooltip").css("display","none"),$("#footer-social-tooltip").css("visibility","hidden"),$("#footer-social-tooltip").empty()})})}function storeMenuArr(){var a=$(".template-menu").width()+$("#menu-hider").width();$("#template-menu").children().each(function(b,c){var d=$(c),e="null",f="null",g=$(".menu-option-text a",d);if(menuOptionsArr[b]=[],menuOptionsArr[b][0]=d,void 0==d.attr("data-module-type")){var h=[];f=d.find(".sub-menu-holder"),f.children().each(function(a,b){var c=$(b),d=$(".sub-menu-option-text a",this),e=String(d.attr("href")),f=d.attr("data-path-href");h[a]=[],h[a][0]=urlCharDeeplink+g.text().toLowerCase()+"/"+e.replace(urlCharDeeplink,""),h[a][1]=[c.attr("data-module-type"),c.attr("data-side"),e.replace(urlCharDeeplink,""),f],h[a][2]=$(".sub-menu-option-background",this),h[a][3]=d}),e=h,menuOptionsArr[b][1]="null"}else menuOptionsArr[b][1]=[d.attr("data-module-type"),d.attr("data-side"),String(g.attr("href")).replace(urlCharDeeplink,""),g.attr("data-path-href")];menuOptionsArr[b][2]=$(".menu-option-background",d),menuOptionsArr[b][3]="null"==e?[g]:[g,$(".menu-option-text div",d)],menuOptionsArr[b][4]=a-parseInt(g.css("padding-left"),10),menuOptionsArr[b][5]=f,menuOptionsArr[b][6]=e,0==touchDevice&&d.bind("mouseenter mouseleave",{idx:b},menuOptionHover)})}function menuOptionIn(a,b){if(menuOptionsArr[a][2].attr("class","menu-option-background-selected"),TweenMax.to(menuOptionsArr[a][2],menuAnimDuration,{css:{marginLeft:"0px",width:menuWidth},ease:menuAnimEase}),TweenMax.to(menuOptionsArr[a][3],menuAnimDuration,{css:{color:"#FFF"},ease:menuAnimEase}),-1!=b){var c=menuOptionsArr[a][6];c[b][2].attr("class","sub-menu-option-background-selected"),TweenMax.to(c[b][2],menuAnimDuration,{css:{marginLeft:"0px",width:menuWidth},ease:menuAnimEase}),TweenMax.to(c[b][3],menuAnimDuration,{css:{color:"#FFF"},ease:menuAnimEase})}}function menuOptionOut(a,b,c){if(void 0==c&&(menuOptionsArr[a][2].attr("class","menu-option-background"),TweenMax.to(menuOptionsArr[a][2],menuAnimDuration,{css:{marginLeft:menuWidth,width:"0px"},ease:menuAnimEase}),TweenMax.to(menuOptionsArr[a][3],menuAnimDuration,{css:{color:menuTextOutColor},ease:menuAnimEase})),-1!=b){var d=menuOptionsArr[a][6];d[b][2].attr("class","sub-menu-option-background"),TweenMax.to(d[b][2],menuAnimDuration,{css:{marginLeft:menuWidth,width:"0px"},ease:menuAnimEase}),TweenMax.to(d[b][3],menuAnimDuration,{css:{color:menuTextOutColor},ease:menuAnimEase})}}function setMenuData(a){oldMenuData=a,currModuleType=a[0],sideType=a[1],url=a[2],$("#template-menu").attr("data-current-module-type",a[0]),$("#template-menu").attr("data-side",a[1]),$("#template-menu").attr("data-href",a[2]),endPreviousModule=!1}function menuOptionHover(a){var b=a.data.idx,c=menuOptionsArr[b][5];if("mouseenter"==a.type){if(menuOptionsArr[b][3][0].css("width",menuOptionsArr[b][4]),TweenMax.to(menuOptionsArr[b][2],menuAnimDuration,{css:{marginLeft:"0px",width:menuWidth},ease:menuAnimEase}),TweenMax.to(menuOptionsArr[b][3],menuAnimDuration,{css:{color:"#FFF"},ease:menuAnimEase}),"null"!=c){c.css("height","").css("width","");var d=c.css("height"),e=c.css("width");c.css("width","0px").css("height","0px"),TweenMax.to(c,menuAnimDuration,{css:{height:d,width:e},delay:.2,ease:menuAnimEase,onStart:function(){c.css("opacity","1").css("display","block")}})}}else menuOptionsArr[b][3][0].css("width",""),0==menuOptionsArr[b][2].hasClass("menu-option-background-selected")&&(TweenMax.to(menuOptionsArr[b][2],menuAnimDuration,{css:{marginLeft:menuWidth,width:"0px"},ease:menuAnimEase}),TweenMax.to(menuOptionsArr[b][3],menuAnimDuration,{css:{color:menuTextOutColor},ease:menuAnimEase})),"null"!=c&&(c.css("overflow",""),TweenMax.killTweensOf(c),TweenMax.to(c,menuAnimDuration,{css:{height:"0px",width:"0px"},ease:menuAnimEase,onComplete:hideSubmenu,onCompleteParams:[c]}))}function hideSubmenu(a){a.css("opacity","0").css("display","none")}function menuListeners(){menuWidth=$(".template-menu").width()+"px",submenuWidth=$(".template-menu").width()+2+"px";var b="sub-menu-option-background-selected";0==touchDevice&&$(".sub-menu-option-holder").hover(function(){var a=$(".sub-menu-option-background",this),c=1==a.length?a:$("."+b,this);TweenMax.to(c,menuAnimDuration,{css:{marginLeft:"0px",width:submenuWidth},ease:menuAnimEase}),TweenMax.to($(".sub-menu-option-text a",this),menuAnimDuration,{css:{color:"#FFF"},ease:menuAnimEase})},function(){if(0==$("div:first",this).hasClass(b)){var a=$(".sub-menu-option-background",this),c=1==a.length?a:$("."+b,this);TweenMax.to(c,menuAnimDuration,{css:{marginLeft:submenuWidth,width:"0px"},ease:menuAnimEase}),TweenMax.to($(".sub-menu-option-text a",this),menuAnimDuration,{css:{color:menuTextOutColor},ease:menuAnimEase})}}),$(".menu-option-holder").click(function(a){a.preventDefault();var b=$(".menu-option-holder").index(this);if("external"==menuOptionsArr[b][1][0])return window.open(menuOptionsArr[b][1][2]),void 0;if(1==touchDevice)if("null"!=menuOptionsArr[b][6]){if(-1!=touchMenuID&&touchMenuID!=b&&menuOptionHover({data:{idx:touchMenuID},type:"mouseleave"}),menuOptionHover({data:{idx:b},type:"mouseenter"}),touchMenuID=b,0==touchRemoveOn){touchRemoveOn=!0;var c=document.getElementById("module-container");c.addEventListener("touchstart",touchContainer,!1)}}else-1!=touchMenuID&&touchMenuID!=b&&(menuOptionHover({data:{idx:touchMenuID},type:"mouseleave"}),touchMenuID=-1);if(menuOptionID!=b&&void 0!=$(this).attr("data-module-type")&&$(this).attr("data-module-type")!=urlCharDeeplink){if(0==loadedContent)return;menuOptionsArr[b][2].attr("class","menu-option-background-selected"),menuOptionOut(menuOptionID,submenuOptionID),menuOptionID=b,submenuOptionID=-1,1==touchDevice&&menuOptionIn(menuOptionID,submenuOptionID);var d=urlCharDeeplink+menuOptionsArr[b][1][2];menuData=menuOptionsArr[b][1],$(window).unbind("hashchange",onTemplateHashChange),window.location.hash=d,clearCustomInterval(delayInterval),delayInterval=setInterval(function(){menuOptionClicked(menuData[2],menuData[0],menuData[1],menuData[3]),clearCustomInterval(delayInterval),$(window).bind("hashchange",onTemplateHashChange)},400)}}),subCloseInterval="",$(".sub-menu-holder .sub-menu-option-holder").click(function(a){a.preventDefault();var b=$(this).parent().get(0),c=$(b).parent().get(0);currMenuOptionID=$(c).index();var d=$(this).index(),e=menuOptionsArr[currMenuOptionID][6];if("external"==e[d][1][0])return window.open(e[d][1][2]),void 0;if(submenuOptionID==d&&menuOptionID==currMenuOptionID)return!1;if(0!=loadedContent){var e=menuOptionsArr[currMenuOptionID][6];menuOptionsArr[currMenuOptionID][2].attr("class","menu-option-background-selected"),e[d][2].attr("class","sub-menu-option-background-selected"),1==touchDevice&&(menuOptionIn(currMenuOptionID,d),clearCustomInterval(subCloseInterval),subCloseInterval=setInterval(function(){touchContainer(),clearCustomInterval(subCloseInterval)},200));var f=void 0;menuOptionID==currMenuOptionID&&(f=!0),menuOptionOut(menuOptionID,submenuOptionID,f),menuOptionID=currMenuOptionID,submenuOptionID=d;var g=e[d][0];menuData=e[d][1],$(window).unbind("hashchange",onTemplateHashChange),window.location.hash=g,clearCustomInterval(delayInterval),delayInterval=setInterval(function(){menuOptionClicked(menuData[2],menuData[0],menuData[1],menuData[3]),clearCustomInterval(delayInterval),$(window).bind("hashchange",onTemplateHashChange)},400),a.stopPropagation()}})}function touchContainer(){if(touchRemoveOn=!1,-1!=touchMenuID&&"null"!=menuOptionsArr[touchMenuID][6]){var a={data:{idx:touchMenuID},type:"mouseleave"};menuOptionHover(a)}var b=document.getElementById("module-container");b.removeEventListener("touchstart",touchContainer,!1)}function urlChanged(){loadedContent=!0,menuOptionClicked(menuData[2],menuData[0],menuData[1],menuData[3])}function isOtherURL(){var a=""!=menuData&&menuData[2]!=prevURL?!0:!1;return a}function menuOptionClicked(a,b,c,d){if(a!=urlCharDeeplink){var e="";if("slideshow"==$("#template-menu").attr("data-current-module-type")&&deleteSlideshowTimer(),"home2"==$("#template-menu").attr("data-current-module-type")&&deleteBannerTimer(),currModuleType=b,sideType=c,d=void 0==d?"":d,setMobileMenuOption(a),e=templateBaseURL+d+a.replace(urlCharDeeplink,""),prevURL=""==prevURL?e:loadURL,loadURL=e,stopCurrentLoading(),null!=endModuleFunction?(delayAnimationLoading=.3,1==moduleEnd&&(moduleEnd=!1,endModuleFunction())):delayAnimationLoading=.1,menuData[2]!=oldMenuData[2])stopAnimBack(!1),loadedContent=!0,activateAnimationLoading();else{loadedContent=!0;var f=$("#loading-animation");if(f.length>0&&TweenMax.to(f,.3,{css:{right:"-104px"},ease:Circ.easeOut}),null==endModuleFunction)switch(menuData[0]){case"news":var g=$(txt_modCont);TweenMax.to(g,.6,{css:{left:"0px"},delay:.1,ease:Circ.easeInOut}),endModuleFunction=endModuleTextPage,moduleEnd=!0,startOn=!0,startAnimBack();break;case"text_page":moduleTextPage(),startOn=!0,startAnimBack();break;case"gallery":endModuleGallery(!0),endModuleFunction=endModuleGallery,startOn=!0,startAnimBack();break;case"showreel":reverseEndModuleShowreel(),startOn=!0,startAnimBack()}}}}function stopCurrentLoading(){""!=loadInterval&&(clearInterval(loadInterval),loadInterval=""),""!=showModuleInterval&&(clearInterval(showModuleInterval),showModuleInterval="")}function activateAnimationLoading(){var a=$("#loading-animation");TweenMax.killTweensOf(a),a.css("right","-104px").css("display","inline").css("visibility","visible"),a.length>0?TweenMax.to(a,.3,{css:{right:"0px"},delay:delayAnimationLoading,ease:Circ.easeOut,onComplete:doLoad}):doLoad()}function doLoad(){if(1==loadedContent){var a=loadURL;clearCustomInterval(loadInterval);var b=$("#module-galleries-preview"),c=$("#full-width-preview");b.length>0&&b.remove(),c.length>0&&c.remove(),loadedContent=!1,loadInterval=setInterval(function(){loadModule(a),clearCustomInterval(loadInterval)},50)}}function loadModule(a){loadedContent=!1,backLoaded=!1,showDone=!1;var b=$("#load-container");b.length>0&&(prevURL=a,b.empty().load(a+" title, #module-container > *",moduleLoaded))}function moduleLoaded(a,b){switch(b){case"error":console.log("Error loading the page: "+a);break;case"success":prevURL!=loadURL?clearCustomInterval(showModuleInterval):(clearCustomInterval(showModuleInterval),showModuleInterval=setInterval(function(){if(menuData[2]==oldMenuData[2]){clearCustomInterval(showModuleInterval),loadedContent=!0;var a=$("#loading-animation");return a.length>0&&TweenMax.to(a,.3,{css:{right:"-104px"},ease:Circ.easeOut}),void 0}setMenuData(menuData);var b=$("#module-container").attr("style");void 0==b&&(b=""),$("#module-container").attr("id","module-container-old").attr("style",b),setPageTitle($("#load-container").find("title")),$("#load-container").find("title").remove(),$("#load-container").css("visibility","hidden").attr("id","module-container").attr("style",b),$("#module-container-old").after($("#module-container")),$("#template-wrapper").after('<div id="load-container"></div>'),showModule(),clearCustomInterval(showModuleInterval)},50))}}function setPageTitle(a){return 0!=isGoodBrowser?a.length<=0?(""!=defaultIndexTitle&&$("head title").empty().append(defaultIndexTitle),void 0):($("head title").empty().append(a.text()),void 0):void 0}function templateCollectGarbage(){var a=$("#template-menu").attr("data-current-module-type");"slideshow"!=a&&(currentSlide=null,null!=thumbsList&&(thumbsList.destroy(),thumbsList=null)),a=null}function moduleUpdate_slideshow(){var a=$(window).width();if($("#slideshow-thumbs-content").length>0){var b=$("#slideshow-thumbs");if(a>=768&&1024>=a)$("#slideshow-thumbs-content").css("width",initialThumbContW+"px");else{var c=$("#slideshow-thumbs-content"),d=$(".slideshow-thumb-holder").width()+parseInt($(".slideshow-thumb-holder").css("margin-right"),10);b.width()>a?$("#slideshow-thumbs-content").css("width",c.width()-d+"px"):b.width()+d<=a&&c.width()+d<=initialThumbContW&&c.css("width",c.width()+d+"px")}b.css("margin-left",.5*($("#module-container").width()-b.width())),null!=thumbsList&&thumbsList.updateCustomList()}var e=$("#slideshow .slideshow-slide");e.length>0&&$("#slideshow-captions",e).each(function(){$(this).css("top",.3*$(window).height()+"px"),$(this).css("left",.5*$("#module-container").width()+"px")})}function moduleUpdate_home2(){var a=$(window).width(),b=".home-layout2-content ul li",c="#module-home-layout2",d=$(txt_modCont),e=$(c,d);e.length<=0||(a>1200?($(c).css("width",""),$(b).attr("style",""),$(b+":nth-child(4n+4)").css("margin-right","0px")):a>1024&&1200>=a?($(c).css("width","800"),$(b).attr("style","").attr("style"," margin-right: 20px; width: 162px;"),$(b+":nth-child(4n+4)").css("margin-right","0px")):a>=768&&1024>=a?($(c).css("width","570"),$(b).attr("style",""),$(b+":nth-child(2n+2)").css("margin-right","0px")):768>a&&a>=480?($(c).css("width","510"),$(b).attr("style",""),$(b+":nth-child(2n+2)").css("margin-right","0px")):480>a&&($(c).css("width","350"),$(b).attr("style",""),$(b).css("margin-right","0px")),moduleUpdate(d,e,$("div:first",e),sideType))}function moduleUpdate_home3(){var a=$(txt_modCont),b=$("#module-home-layout3",a);b.length<=0||moduleUpdate(a,b,$("div:first",b),sideType)}function moduleUpdate_text_page(){var a=$(txt_modCont),b=$("#module-wrapper",a);b.length<=0||moduleUpdate(a,b,$("div:first",b),sideType)}function moduleUpdate_showreel(){var a=$(txt_modCont),b=$("#module-showreel",a);b.length<=0||moduleUpdate(a,b,$("div:first",b),sideType)}function moduleUpdate_fullscreen_video(){var b=$(txt_modCont),c=$("#module-fullscreen-video",b);if(!(c.length<=0)){var d=$(window).width()-get_OffsetWidth(),e=$(window).height(),f=$("#standalone-wrapper",c);f.length>0?TweenMax.to([f,c],.6,{css:{width:d,height:e},easing:Sine.easeOut}):TweenMax.to(c,.6,{css:{width:d,height:e},easing:Sine.easeOut})}}function moduleUpdate_pricing_tables(){var a=$(txt_modCont),b=$("#module-pricing",a);b.length<=0||moduleUpdate(a,b,$("div:first",b),sideType)}function moduleUpdate_full_width(a){var b=$(txt_modCont),c=$("#module-full-width",b),d=$("#module-wrapper",c);if(!(c.length<=0)){var e=$(window).width()-get_OffsetWidth();if(1==touchDevice){var f=0==menuActive?0:templateMenuW;e=$(window).width()-f}null!=moduleList?moduleList.currentPosition():0;var h=c.width();c.css("width",e),$("#module-full-width-holder-text",d).height()>$(window).height()&&(e-=$(t_scrBarV2).width()),void 0==a||0==a?(c.css("width",e),moduleUpdate(b,d,$("div:first",d),sideType,sideType)):h==e?(c.css("width",e),1==touchDevice&&moduleUpdate(b,d,$("div:first",d),sideType)):TweenMax.to(c,.3,{css:{width:e},easeing:Sine.easeOut,onComplete:function(){moduleUpdate(b,d,$("div:first",d),sideType)}})}}function moduleUpdate_news(){var a=$(txt_modCont),b=$("#module-news-vertical",a);$(newsPrvU,b);var d="#module-news-vertical-holder";if(1==previewNewsOpen){var e=0;for(e;totalPreviews>e;e++)e!=previewNewsIndex?newsPrevItemArr[e].css("display","none"):newsPrevItemArr[e].css("display","inline");var f=$("#module-news-preview-container",b),g=parseInt(f.css("margin-top"),10)+parseInt(f.css("margin-bottom"),10);f.css("height",""),$(".news-preview-horizontal-fix",b).css("height","");var h=f.height();$(".news-preview-horizontal-fix",b).css("height",h-g),moduleUpdate(a,$("#module-news-preview-holder",b),f,"custom",0),(0==touchDevice||1==touchDevice)&&(f.css("height",""),f.css("height",h)),newsPreviewItemDisplay("inline")}else moduleUpdate(a,$(d,b),$(d+" div:first",b),sideType)}function moduleUpdate_contact(){var a=$(txt_modCont),b=$("#module-wrapper",a),c=$("#map-holder",a);if(!(b.length<=0||$("#module-contact-holder").length<=0)){var d=$("#module-container").width();$("#module-contact-holder").css("left",.5*(d-$("#module-contact-holder").width())+"px"),screen.width;var f=.5*-get_OffsetWidth();c.length>0&&TweenMax.to(c,.3,{css:{left:f},easing:Sine.easeOut});var g=$(window).width()-get_OffsetWidth()-$(t_scrBarV2).width();1==touchDevice&&(g=$(window).width()-templateMenuW),b.css("width",g),$("div:first",b).height()<=$(window).height()&&(g+=$(t_scrBarV2).width()),b.css("width",g);var h=$("#media-holder-contact",b);if(h.length>0&&$("img",h).length>0){var i=$("img",h).height(),j=i>initialMediaH?initialMediaH:i;0==j&&(j=i),h.css("height",j)}moduleUpdate(a,b,$("div:first",b),sideType)}}function moduleUpdate_gallery(){var a=$(txt_modCont),b=$("#module-galleries",a),c=$("#module-galleries-holder",b);if(!(b.length<=0)){var d=parseInt($(".thumb-holder").css("margin-right"),10),e=parseInt($(".thumb-holder").css("margin-bottom"),10),f=$(".thumb-holder").width(),g=$(".thumb-holder").height(),h=c.width();c.height();var j=b.height(),k=Math.round(h/(f+d)),l=Math.floor(j/(g+e)+1);visibleGalleryH=j,galleryColumns=k,galleryLines=l,$(".thumb-holder",c).css("margin-right",""),$(".thumb-holder:nth-child("+galleryColumns+"n+"+galleryColumns+")",c).css("margin-right","0px"),moduleUpdate(a,b,$("div:first",b),sideType),1==previewGalleryOpen&&updatePreviewMediaPosition()}}function moduleUpdate_full_width_gallery(){var a=$(txt_modCont),b=$("#module-full-width-gallery",a);if(a.attr("data-id"),b.length>0){if(0>=initialThumbW)return;checkItems(),moduleUpdate(a,b,$("div:first",b),sideType)}1==previewFullWidthOpen&&updateFullWidthPreviewPosition()}function moduleUpdate_page_columns(a){var b=$(txt_modCont),c=$("#module-columns",b);b.attr("data-id");var e=$("#module-columns-wrapper",c),f=$("#module-columns-preview-wrapper",c);if(!(c.length<=0)){checkColumnSize(columnsPreviewOpen);var g=0;$("#filter-buttons-holder",c).find(".filter-button").each(function(){if("*"!=$(this).attr("data-filter"))$(this).removeClass("selected"),TweenMax.to($(this),.3,{css:{color:"#3f3f3f",backgroundColor:"transparent"},ease:Sine.easeOut});
else{if(1==$(this).hasClass("selected"))return;$(this).addClass("selected"),TweenMax.to($(this),.3,{css:{color:"#ffffff",backgroundColor:themeColor},ease:Sine.easeOut})}g++});var h=.5*Math.abs($("#module-container").width()-b.width());if(TweenMax.to(b,.2,{css:{left:h},ease:Circ.easeOut}),0==columnsPreviewOpen)void 0==a&&(a=0),moduleUpdate(b,e,$("div:first",e),sideType,null,null,a);else{if(0==previewAnimDone)return;var g=0;for(g;totalColPreviews>g;g++)g!=columnsPreviewIndex?columnsPrevItemArr[g].css("display","none"):columnsPrevItemArr[g].css("display","inline");var i=$("div:first",f),j=parseInt(i.css("margin-top"),10)+parseInt(i.css("margin-bottom"),10);i.css("height",""),$(".columns-preview-horizontal-fix",c).css("height","");var k=i.height();$(".columns-preview-horizontal-fix",c).css("height",k-j),moduleUpdate(b,f,i,sideType,null,null,0),(0==touchDevice||1==touchDevice)&&(i.css("height",""),i.css("height",k)),colPreviewItemDisplay("inline"),""!=colSlidesControl&&updateResizeSlides()}}}function templateResize(){switch(null!=currentSlide&&resizeImage(currentSlide),null!=$showModuleBackground&&resizeImage($showModuleBackground),updateTemplateScrollbar(),currModuleType){case"slideshow":moduleUpdate_slideshow();break;case"home2":moduleUpdate_home2();break;case"home3":moduleUpdate_home3();break;case"text_page":moduleUpdate_text_page();break;case"showreel":moduleUpdate_showreel();break;case"fullscreen_video":moduleUpdate_fullscreen_video();break;case"pricing_tables":moduleUpdate_pricing_tables();break;case"full_width":moduleUpdate_full_width();break;case"news":moduleUpdate_news();break;case"contact":moduleUpdate_contact();break;case"gallery":moduleUpdate_gallery();break;case"full_width_gallery":moduleUpdate_full_width_gallery();break;case"page_columns":moduleUpdate_page_columns()}moduleType=null,1!=firstRun&&($(window).width()>=768?$("footer").css("display","inline").css("visibility","visible"):$("footer").css("display","none").css("visibility","hidden"))}function updateTemplateScrollbar(){var a=$("#module-container #module-scrollbar-holder"),b=$("#module-container #module-scrollbar-holder_v2"),c=a.length>0?a:b,d=$(window).width(),e=$(window).height(),f=parseInt($("#menu-container #menu-hider").height(),10),g=getMenuWidth();if(getMenuHeight(),$("#module-container").css("width",d-get_OffsetWidth()+"px"),d>=768){if($("#module-container").css("top","0px").css("left",g+"px"),$("#module-container").css("height","100%"),0==firstRun&&$("footer").css("display","inline").css("visibility","visible"),c.length>0&&c.css("height",e).css("top","0px"),0==menuActive){var i=$("#menu-hider").length>0?parseInt($("#menu-hider").width(),10):0,j=parseInt($("#menu-container").css("width"),10)-i,k=0;$("#template-wrapper").css("left",-j+"px").css("top","0px"),$("#menu-container").css("left",k+"px").css("top","0px")}}else{if(1==menuActive){var k=0;$("#template-wrapper").css("left","0px").css("top","0px"),$("#menu-container").css("left","0px").css("top","0px")}else{var l=parseInt($("#menu-container").height(),10)-f;$("#template-wrapper").css("left","0px").css("top",-l+"px"),$("#menu-container").css("left","0px").css("top","0px")}$("#module-container").css("left","0px").css("top",$("#menu-container").height()+"px"),$("#module-container").css("height",e-f+"px"),0==firstRun&&$("footer").css("display","none").css("visibility","hidden"),c.length>0&&c.css("height",e-f+"px")}}function get_OffsetWidth(){var a=0;return $(window).width()>767&&(a=0==menuActive?0==isOverMenu?parseInt($("#menu-hider").css("width"),10):parseInt($("#menu-container").css("width"),10):parseInt($("#menu-container").css("width"),10)),a}function templateAddMediaVideo(a,b,c){b.attr("id");var e="standalone"!=a?e=b.attr("data-url"):"",f=void 0==c?b:c,g="";if("standalone"==a){g+='<video id="standalone-wrapper" class="video-js vjs-default-skin" controls preload="none" width="'+b.attr("data-width")+'" height="'+b.attr("data-height")+'"'+'poster="'+b.attr("data-poster")+'">';for(var h=1;3>=h;h++)g+='<source src="'+$(b).attr("data-url"+h)+'" type="'+$(b).attr("data-type"+h)+'" />';g+="</video>"}else"standalone"!=a&&(g+='<iframe src="'+e+'" width="'+b.attr("data-width")+'" height="'+b.attr("data-height")+'" frameborder="0" allowfullscreen="" mozallowfullscreen="" webkitallowfullscreen=""></iframe>',$.browser.msie&&"youtube"==a&&("8.0"==$.browser.version||"9.0"==$.browser.version&&0==isIE9Std())&&(e=e.replace("http://www.youtube.com/embed/","http://www.youtube.com/v/"),g='<object width="'+b.attr("data-width")+'" height="'+b.attr("data-height")+'">'+'<param name="movie" value="'+e+'?fs=1&enablejsapi=1"></param>'+'<param name="allowFullScreen" value="true"></param>'+'<param name="allowScriptAccess" value="always"></param>'+'<embed id="ytplayer" src="'+e+'?fs=1&enablejsapi=1"'+'type="application/x-shockwave-flash"'+'allowfullscreen="true"'+'allowscriptaccess="always"'+'width="'+b.attr("data-width")+'" height="'+b.attr("data-height")+'">'+"</embed>"+"</object>"));if(f.append(g),destroyVideoJS(),f.css("opacity","0").css("visibility","visible"),"standalone"==a){var i=!1;videojsHolder=_V_("standalone-wrapper",{},function(){0==i&&(i=!0,TweenMax.to([$("#standalone-wrapper"),f],.6,{css:{opacity:"1"},ease:Circ.easeOut}))})}else TweenMax.to(f,.6,{css:{opacity:"1"},ease:Circ.easeOut})}function destroyVideoJS(){""!=videojsHolder&&(videojsHolder.pause(),"html5"==videojsHolder.techName&&(videojsHolder.tag.src="",videojsHolder.tech.removeTriggers(),videojsHolder.load()),videojsHolder.tech.destroy(),videojsHolder.destroy(),$(videojsHolder.el).remove(),videojsHolder.players={})}function clearCustomInterval(a){""!=a&&(clearInterval(a),a="")}function resizeImage(a,b){a.removeAttr("width"),a.removeAttr("height");var i,j,c=$(window).width()-get_OffsetWidth(),d=$(window).height(),e=a.width(),f=a.height(),g=d/c,h=f/e;g>h?(i=d/h,j=d):(i=c,j=c*h),void 0==b||0==b?a.css("width",i).css("height",j):1==b&&TweenMax.to(a,.6,{css:{width:i,height:j},ease:Sine.easeOut})}function rgb2hex(a){var b="";return void 0!=a&&($.browser.msie&&"9.0"==$.browser.version&&1==isIE9Std()||!$.browser.msie?(a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),b="#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2)):b=a),b}function mobileConsole(a,b,c,d){void 0!=c&&1==c&&$("#console-log").empty(),$("#console-log").append("<span>"+a+" "+b+"</span>"),1==d&&$("#console-log").css("display","inline")}var templateBaseURL="http://mkti.in/",themeColor="#122f45",menuActive=!0,menuHoverActive=!0,menuTextOutColor="#777777",customPageStart=!0,customPageStartURL="#home.html",customPageStartSide="none",customPageStartType="slideshow",contactFormDemo=!0,urlCharDeeplink="#";$(document).ready(function(){readyAndLoad++,$(window).error(function(a,b,c){console.log("error: ",a," url: ",b," line: ",c)}),2==readyAndLoad&&checkIfTouchDevice()}),$(window).load(function(){if(readyAndLoad++,"http://www.your_domain.com/"==templateBaseURL||"null"==templateBaseURL)return $("body").empty().css("visibility","visible").append("<br/><span>Please check the documentation - 2.1 General Settings - on how to change the 'templateBaseURL' path!!!</span>"),void 0;var a=templateBaseURL+"";a=a.substr(a.length-1),"/"!=a&&(templateBaseURL+="/"),2==readyAndLoad&&checkIfTouchDevice()});var readyAndLoad=0,firstRun=!0,isOverMenu=!1,templateMenuW=0,videojsHolder="",audioAutoPlay=!1,audioPlayerOpened=!0,audioMuteOn=!1,volumeValue=.8,t_scrBarV1="#module-scrollbar-holder",t_scrBarV2="#module-scrollbar-holder_v2",txt_modCont="#module-container #module-container-holder",touchDevice=0,isGoodBrowser=!1,templateFirstRun=!0,templateFirstRunDone=!1,defaultIndexTitle="",delayInterval="",$showModuleBackground=null,$showModuleBackgroundSolid=null,showDone=!1,startDelay="",backLoaded=!1,endModuleFunction=null,endPreviousModule=!1,previousModuleType="",endShowDelay="",backgArrSrc=[],backgArr=[],currBack="",prevBack="",backDelay="",backCount=0,backTime=3,startOn=!1,slideshowLimit=0,slideshowCurrID=0,slideshowPrevID=0,oldSlide="",slidesArray=new Array,thumbsArray=[],thumbsList=null,currentSlide=null,slideshowAutoPlay=!0,total=0,timerSec=5,timerSlideshow=null,firstMediaLoaded=!1,initialThumbContW=0,showingInProgress=0,stdCurrIndex=0,stdPrevIndex=0,totalBannerSlides=0,slideBannerAutoPlay=!1,slideBannerSec=4,timerBanner=null,delayBannerInterval="",timerGraphic="",homeInterval="",moduleList=null,updateInterval="",previewNewsOpen=!1,previewNewsIndex=0,totalPreviews=0,previewNewsMediaParent="",newsPrevItemArr="",shortNIV="news-item-vertical",shortNP="news-preview",shortNPH="#module-news-preview-holder",shortNPU="#news-preview-list",newsPrvH="",newsPrvU="",initialMediaH=0,nameInst="",email="",phone="",messg="",nameDefTxt="",emailDefTxt="",phoneDefTxt="",messgDefTxt="",resetBtn="",sendBtn="",sendBtnText="",btnTextSend="",initialNumberColumns=4,maximNumberColumns=4,initialThumbW=0,initialThumbH=0,previewMediaArr=Array(),previewMediaDescArr=Array(),previewBorderSize=0,currIndex=0,previewFullWidthOpen=!1,portfolioLinkArr=[],portfolioSocialArr=[],prevRatio=0,smpPrevOpen=!1,fwMediaType="",fwW="",fwH="",justOpenedPreivew=!0,animationLoadFWPreviewDone=!0,columnsPreviewOpen=!1,previewAnimDone=!0,columnsPreviewIndex=0,columnsPrevItemArr="",totalColPreviews=0,$originalDataPos=0,tempSlidesControl="",colSlidesControl="",columnsPrevItemMediaArr=[],sCurrIdx=0,delayRemove="",containerTotalH=0,initialColumns=0,maxColumns=4,galleryList=null,galleryPreviewMediaArr=new Array,galleryPreviewDescArr=new Array,currGalleryThumbID=0,currPreviewElem="",visibleGalleryH=0,galleryColumns=0,galleryLines=0,galleryVisibleThumbs=0,previewGalleryOpen=!1,galleryItemArr=new Array,galleryTopPos=0,moduleEnd=!0,galleryLink=[],loadingAnimationDone=!0,previewDescriptionActive=!0,firstDescRun=!0,playSign,pauseSign,volOnSign,volOffSign,isPlaying=!1,initializePlayer=!1,myPlaylist,firstPlay=!0,audioPlayerInst,isAudioPlaying=!1,tempVolume=0,currModuleType="",prevModuleType="",sideType="none",prevURL="",loadURL="",menuOptionsArr=new Array,menuOptionID=0,submenuOptionID=-1,menuAnimEase=Quad.easeOut,menuAnimDuration=.4,menuWidth=0,submenuWidth=0,oldMenuData="",menuData="",touchRemoveOn=!1,touchMenuID=-1,delayAnimationLoading=.3,loadInterval="",loadedContent=!0,showModuleInterval="",cc=0;$(window).resize(function(){templateResize()});